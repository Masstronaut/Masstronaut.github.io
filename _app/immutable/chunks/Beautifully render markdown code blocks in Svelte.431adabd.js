import{s as _s,C as ns,a5 as Ds,f as r,a as t,I as H,e as S,g as p,u as k,c as o,K as M,j as es,i as e,A as bs,d as n}from"./scheduler.7131e7f1.js";import{S as Ts,i as Hs,b as Ss,d as Ms,m as Ls,a as js,t as Is,e as Es}from"./index.9e889c2d.js";import{g as Fs,a as us}from"./spread.8a54911c.js";import{M as Ps}from"./MDSveXNoteLayout.5604b05c.js";function $s(T){let i,f="I love the craft of building software. It amazes me that I can write something and have computers reliably and consistently do what I told it to. Add a few more clicks and I can make it instantly available to anyone, anywhere on the planet, so long as they have an internet connected device.",d,h,l="When I code something particularly interesting I want to share how I did it. Teaching is a valuable part of my own learning process, and it’s rewarding to help other people get excited about building. Sharing code is a critical part of that, and this note is about how I make the code I share look great!",c,y,is='To start with, it’s helpful to understand a bit about my pipeline for getting from raw markdown code blocks to a rendered page on <a href="https://allandeutsch.com" rel="nofollow">allandeutsch.com</a>.',G,A,ls='<li><a href="https://mdsvex.pngwn.io/" rel="nofollow">mdsvex</a> is a svelte preprocessor that uses <a href="https://remark.js.org/" rel="nofollow">remark</a> to process raw markdown and <a href="https://github.com/remarkjs/remark-rehype" rel="nofollow">remark-rehype</a> to transform it to HTML</li> <li>mdsvex passes the markdown code blocks to a code highlighter to provide syntax highlighting</li> <li>A <code>meta</code> string in the code fence of code blocks is used to pass options to twoslash; I use <code>fenceparser</code> to parse the code fence</li> <li>I wrote a highlighter that uses <a href="https://shiki.style" rel="nofollow">shiki</a> to render code in light &amp; dark themes<ul><li>It uses <a href="https://shiki.style/packages/twoslash" rel="nofollow">@shikijs/twoslash</a> to provide type annotations on typescript code</li></ul></li> <li>A CSS media query styles the code using the light or dark theme based on the user’s preference</li>',J,m,ts='<a aria-hidden="true" tabindex="-1" href="#installing-the-dependencies"><span class="icon icon-link"></span></a><a href="#installing-the-dependencies" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Installing the dependencies',N,g,os="My site is built using “Static Site Generation” (SSG), a technique which compiles my source into static HTML, CSS, and JS files at build time so the deployment can be delivered to visitors really efficiently via CDN since no logic needs to run on each request. This approach means I can do the highlighting at build time rather than runtime, and all of the tools I listed above can be included as dev dependencies. to install them:",R,L,gs='<pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> install</span><span style="color:#A65E2B;--shiki-dark:#C99076"> --save-dev</span><span style="color:#B56959;--shiki-dark:#C98A7D"> @shikijs/twoslash</span><span style="color:#B56959;--shiki-dark:#C98A7D"> shiki</span><span style="color:#B56959;--shiki-dark:#C98A7D"> mdsvex</span><span style="color:#B56959;--shiki-dark:#C98A7D"> fenceparser</span></span></code></pre>',j,I,vs='<pre class="code-copy-target hidden">npm install --save-dev @shikijs/twoslash shiki mdsvex fenceparser</pre>',E,D,rs='<a aria-hidden="true" tabindex="-1" href="#configuring-mdsvex"><span class="icon icon-link"></span></a><a href="#configuring-mdsvex" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Configuring mdsvex',Z,v,ps='One important thing to know about mdsvex is that it is a svelte <strong>pre</strong>processor. This is important to note: the preprocessor code doesn’t get preprocessed because it runs before the compiler. For now, that means <strong>it cannot use TypeScript</strong> because it would need to be compiled to JS first and that doesn’t happen for <a href="https://github.com/sveltejs/kit/pull/4031" rel="nofollow">reasons</a>. Hopefully that will <a href="https://github.com/sveltejs/rfcs/pull/59" rel="nofollow">change in the future</a>.',K,B,ks="What this means practically is that the mdsvex config can’t be implemented in TypeScript: it <strong>must</strong> be javascript. Here’s how I configured mine to highlight code blocks!",U,F,Bs=`<pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" js filename="mdsvex.config.js"><code><span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#B07D48;--shiki-dark:#BD976A"> defineMDSveXConfig</span><span style="color:#1E754F;--shiki-dark:#4D9375"> as</span><span style="color:#B07D48;--shiki-dark:#BD976A"> defineConfig</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#B07D48;--shiki-dark:#BD976A"> escapeSvelte</span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">mdsvex</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#B07D48;--shiki-dark:#BD976A"> codeToHtml</span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">shiki</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#B07D48;--shiki-dark:#BD976A"> transformerTwoslash</span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">@shikijs/twoslash</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#B07D48;--shiki-dark:#BD976A"> lex</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#B07D48;--shiki-dark:#BD976A"> parse</span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">fenceparser</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">// Define an mdsvex-compatible code highlighter</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">async</span><span style="color:#AB5959;--shiki-dark:#CB7676"> function</span><span style="color:#59873A;--shiki-dark:#80A665"> ShikiTwoslashHighlighter</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A">code</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#B07D48;--shiki-dark:#BD976A"> lang</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#B07D48;--shiki-dark:#BD976A"> meta</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">	// Parse the &#96;meta&#96; prop, if defined, for any options to provide to shiki</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">	let</span><span style="color:#B07D48;--shiki-dark:#BD976A"> fence</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">	if</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">meta</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#B07D48;--shiki-dark:#BD976A"> fence</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#59873A;--shiki-dark:#80A665"> parse</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#59873A;--shiki-dark:#80A665">lex</span><span style="color:#999999;--shiki-dark:#666666">([</span><span style="color:#B07D48;--shiki-dark:#BD976A">lang</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#B07D48;--shiki-dark:#BD976A"> meta</span><span style="color:#999999;--shiki-dark:#666666">].</span><span style="color:#59873A;--shiki-dark:#80A665">filter</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A">Boolean</span><span style="color:#999999;--shiki-dark:#666666">).</span><span style="color:#59873A;--shiki-dark:#80A665">join</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#999999;--shiki-dark:#666666">)));</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">	if</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">fence</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">		// structure the options as a &#96;CodeOptionsMeta&#96; object</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">		fence</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#999999;--shiki-dark:#666666"> ...</span><span style="color:#B07D48;--shiki-dark:#BD976A">fence</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#998418;--shiki-dark:#B8A965"> __raw</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> meta</span><span style="color:#999999;--shiki-dark:#666666"> &#125;;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">	// Run shiki's highlighter</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">	const</span><span style="color:#B07D48;--shiki-dark:#BD976A"> html</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#1E754F;--shiki-dark:#4D9375"> await</span><span style="color:#59873A;--shiki-dark:#80A665"> codeToHtml</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A">code</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">		// shiki's language list is case sensitive and all lowercase</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">		// default behavior without a language is to throw</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">		// I prefer no highlighting, which 'text' achieves</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		lang</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> lang</span><span style="color:#AB5959;--shiki-dark:#CB7676"> ?</span><span style="color:#B07D48;--shiki-dark:#BD976A"> lang</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#59873A;--shiki-dark:#80A665">toLowerCase</span><span style="color:#999999;--shiki-dark:#666666">()</span><span style="color:#AB5959;--shiki-dark:#CB7676"> :</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">text</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		themes</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#998418;--shiki-dark:#B8A965"> light</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">github-light</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#998418;--shiki-dark:#B8A965"> dark</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">slack-dark</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666"> &#125;,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		defaultColor</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">light</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		meta</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> fence</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		transformers</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">			// only run twoslash if &#96;twoslash&#96; is in the code fence</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">			// see: https://shiki.style/packages/twoslash#explicit-trigger</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">			transformerTwoslash</span><span style="color:#999999;--shiki-dark:#666666">(&#123;</span><span style="color:#998418;--shiki-dark:#B8A965"> explicitTrigger</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#1E754F;--shiki-dark:#4D9375"> true</span><span style="color:#999999;--shiki-dark:#666666"> &#125;),</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">			// any other transformers...</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		]</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;);</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">	// this escapes the rendered HTML and wraps it in a</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">	// svelte [&#123;@html ...&#125; tag](https://svelte.dev/docs/special-tags#html)</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">	return</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> &#96;</span><span style="color:#B56959;--shiki-dark:#C98A7D">&#123;@html </span><span style="color:#A65E2B;--shiki-dark:#C99076">&#96;</span><span style="color:#999999;--shiki-dark:#666666">$&#123;</span><span style="color:#59873A;--shiki-dark:#80A665">escapeSvelte</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B56959;--shiki-dark:#C98A7D">html</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#999999;--shiki-dark:#666666">&#125;</span><span style="color:#A65E2B;--shiki-dark:#C99076">&#96;</span><span style="color:#B56959;--shiki-dark:#C98A7D"> &#125;</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">&#96;</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">// configure mdsvex</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const</span><span style="color:#B07D48;--shiki-dark:#BD976A"> config</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#59873A;--shiki-dark:#80A665"> defineConfig</span><span style="color:#999999;--shiki-dark:#666666">(&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">	extensions</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">.md</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">.svx</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">	highlight</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		highlighter</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> ShikiTwoslashHighlighter</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;,</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">	// other config options...</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">export</span><span style="color:#1E754F;--shiki-dark:#4D9375"> default</span><span style="color:#B07D48;--shiki-dark:#BD976A"> config</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"></span></code></pre>`,P,$,xs=`<pre class="code-copy-target hidden">import &#123; defineMDSveXConfig as defineConfig, escapeSvelte &#125; from 'mdsvex';
import &#123; codeToHtml &#125; from 'shiki';
import &#123; transformerTwoslash &#125; from '@shikijs/twoslash';
import &#123; lex, parse &#125; from 'fenceparser';

// Define an mdsvex-compatible code highlighter
async function ShikiTwoslashHighlighter(code, lang, meta) &#123;
	// Parse the &#96;meta&#96; prop, if defined, for any options to provide to shiki
	let fence;
	if (meta) fence = parse(lex([lang, meta].filter(Boolean).join(' ')));
	if (fence) &#123;
		// structure the options as a &#96;CodeOptionsMeta&#96; object
		fence = &#123; ...fence, __raw: meta &#125;;
	&#125;

	// Run shiki's highlighter
	const html = await codeToHtml(code, &#123;
		// shiki's language list is case sensitive and all lowercase
		// default behavior without a language is to throw
		// I prefer no highlighting, which 'text' achieves
		lang: lang ? lang.toLowerCase() : 'text',
		themes: &#123; light: 'github-light', dark: 'slack-dark' &#125;,
		defaultColor: 'light',
		meta: fence,
		transformers: [
			// only run twoslash if &#96;twoslash&#96; is in the code fence
			// see: https://shiki.style/packages/twoslash#explicit-trigger
			transformerTwoslash(&#123; explicitTrigger: true &#125;),
			// any other transformers...
		]
	&#125;);
	// this escapes the rendered HTML and wraps it in a
	// svelte [&#123;@html ...&#125; tag](https://svelte.dev/docs/special-tags#html)
	return &#96;&#123;@html &#96;$&#123;escapeSvelte(html)&#125;&#96; &#125;&#96;;
&#125;
// configure mdsvex
const config = defineConfig(&#123;
	extensions: ['.md', '.svx'],
	highlight: &#123;
		highlighter: ShikiTwoslashHighlighter
	&#125;,
	// other config options...
&#125;);

export default config;
</pre>`,q,x,cs='There’s a good bit going on in this config, so I did my best to document it with comments. One aspect I didn’t cover was theming; I think the <a href="https://shiki.style/guide/dual-themes" rel="nofollow">shiki dual theme documentation</a> does a great job explaining how to configure rendering light and dark themes. It also includes CSS snippets for setting the theme. I prefer to follow what the user’s OS specifies, which perfectly fits their <a href="https://shiki.style/guide/dual-themes#query-based-dark-mode" rel="nofollow">CSS media query</a> example which worked for me with no changes.',Q,u,hs='<a aria-hidden="true" tabindex="-1" href="#configuring-svelte-to-use-the-mdsvex-preprocessor"><span class="icon icon-link"></span></a><a href="#configuring-svelte-to-use-the-mdsvex-preprocessor" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Configuring svelte to use the mdsvex preprocessor',V,C,ds="Svelte needs to be configured to use mdsvex as a preprocessor for markdown files. This is done in <code>svelte.config.js</code>. mdsvex supports using svelte components in markdown. By convention, svelte-y markdown files use the <code>.svx</code> extension, but it’s possible to use any file extension.",Y,w,ys="This is how I configured svelte to use mdsvex as a preprocessor for <code>.md</code> and <code>.svx</code> files:",ss,z,Cs=`<pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" js filename="svelte.config.js"><code><span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#B07D48;--shiki-dark:#BD976A"> mdsvex</span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">mdsvex</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#B07D48;--shiki-dark:#BD976A"> mdsvexConfig</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695999;--shiki-dark:#C98A7D99"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">./mdsvex.config.js</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">/** </span><span style="color:#999999;--shiki-dark:#666666">@</span><span style="color:#1E754F;--shiki-dark:#4D9375">type</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">import('@sveltejs/kit').Config</span><span style="color:#999999;--shiki-dark:#666666">&#125;</span><span style="color:#A0ADA0;--shiki-dark:#758575DD"> */</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const</span><span style="color:#B07D48;--shiki-dark:#BD976A"> config</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">  // using the extensions from mdsvexConfig keeps them in sync</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">  extensions</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">.svelte</span><span style="color:#B5695999;--shiki-dark:#C98A7D99">'</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#999999;--shiki-dark:#666666"> ...</span><span style="color:#B07D48;--shiki-dark:#BD976A">mdsvexConfig</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">extensions</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">  preprocess</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">    mdsvex</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A">mdsvexConfig</span><span style="color:#999999;--shiki-dark:#666666">),</span><span style="color:#A0ADA0;--shiki-dark:#758575DD"> // &#x3C;--- crucial</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">    // other preprocessors...</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">  ],</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">  // other config...</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">export</span><span style="color:#1E754F;--shiki-dark:#4D9375"> default</span><span style="color:#B07D48;--shiki-dark:#BD976A"> config</span><span style="color:#999999;--shiki-dark:#666666">;</span></span></code></pre>`,O,W,ws=`<pre class="code-copy-target hidden">import &#123; mdsvex &#125; from 'mdsvex';
import mdsvexConfig from './mdsvex.config.js';

/** @type &#123;import('@sveltejs/kit').Config&#125; */
const config = &#123;
  // using the extensions from mdsvexConfig keeps them in sync
  extensions: ['.svelte', ...mdsvexConfig.extensions],
  preprocess: [
    mdsvex(mdsvexConfig), // &lt;--- crucial
    // other preprocessors...
  ],
  // other config...
&#125;;
export default config;</pre>`,X,_,fs="With that config in place, svelte is able to import <code>.md</code> and <code>.svx</code> files and render them as components.",as,b,ms="I’ve found this makes my notes on programming (like this one!) much nicer to read. Hopefully you agree!";return{c(){i=r("p"),i.textContent=f,d=t(),h=r("p"),h.textContent=l,c=t(),y=r("p"),y.innerHTML=is,G=t(),A=r("ul"),A.innerHTML=ls,J=t(),m=r("h2"),m.innerHTML=ts,N=t(),g=r("p"),g.textContent=os,R=t(),L=new H(!1),j=S(),I=new H(!1),E=t(),D=r("h2"),D.innerHTML=rs,Z=t(),v=r("p"),v.innerHTML=ps,K=t(),B=r("p"),B.innerHTML=ks,U=t(),F=new H(!1),P=S(),$=new H(!1),q=t(),x=r("p"),x.innerHTML=cs,Q=t(),u=r("h2"),u.innerHTML=hs,V=t(),C=r("p"),C.innerHTML=ds,Y=t(),w=r("p"),w.innerHTML=ys,ss=t(),z=new H(!1),O=S(),W=new H(!1),X=t(),_=r("p"),_.innerHTML=fs,as=t(),b=r("p"),b.textContent=ms,this.h()},l(s){i=p(s,"P",{"data-svelte-h":!0}),k(i)!=="svelte-9z2ana"&&(i.textContent=f),d=o(s),h=p(s,"P",{"data-svelte-h":!0}),k(h)!=="svelte-11bvpwc"&&(h.textContent=l),c=o(s),y=p(s,"P",{"data-svelte-h":!0}),k(y)!=="svelte-vyjx2s"&&(y.innerHTML=is),G=o(s),A=p(s,"UL",{"data-svelte-h":!0}),k(A)!=="svelte-1domgx4"&&(A.innerHTML=ls),J=o(s),m=p(s,"H2",{id:!0,"data-svelte-h":!0}),k(m)!=="svelte-1rst7f4"&&(m.innerHTML=ts),N=o(s),g=p(s,"P",{"data-svelte-h":!0}),k(g)!=="svelte-151gjaq"&&(g.textContent=os),R=o(s),L=M(s,!1),j=S(),I=M(s,!1),E=o(s),D=p(s,"H2",{id:!0,"data-svelte-h":!0}),k(D)!=="svelte-1n7rqyz"&&(D.innerHTML=rs),Z=o(s),v=p(s,"P",{"data-svelte-h":!0}),k(v)!=="svelte-ils5kr"&&(v.innerHTML=ps),K=o(s),B=p(s,"P",{"data-svelte-h":!0}),k(B)!=="svelte-1vix34d"&&(B.innerHTML=ks),U=o(s),F=M(s,!1),P=S(),$=M(s,!1),q=o(s),x=p(s,"P",{"data-svelte-h":!0}),k(x)!=="svelte-zwg4pv"&&(x.innerHTML=cs),Q=o(s),u=p(s,"H2",{id:!0,"data-svelte-h":!0}),k(u)!=="svelte-16qyjt6"&&(u.innerHTML=hs),V=o(s),C=p(s,"P",{"data-svelte-h":!0}),k(C)!=="svelte-1plkxno"&&(C.innerHTML=ds),Y=o(s),w=p(s,"P",{"data-svelte-h":!0}),k(w)!=="svelte-1hlcz2c"&&(w.innerHTML=ys),ss=o(s),z=M(s,!1),O=S(),W=M(s,!1),X=o(s),_=p(s,"P",{"data-svelte-h":!0}),k(_)!=="svelte-dg1ivb"&&(_.innerHTML=fs),as=o(s),b=p(s,"P",{"data-svelte-h":!0}),k(b)!=="svelte-1o3fez"&&(b.textContent=ms),this.h()},h(){es(m,"id","installing-the-dependencies"),L.a=j,I.a=E,es(D,"id","configuring-mdsvex"),F.a=P,$.a=q,es(u,"id","configuring-svelte-to-use-the-mdsvex-preprocessor"),z.a=O,W.a=X},m(s,a){e(s,i,a),e(s,d,a),e(s,h,a),e(s,c,a),e(s,y,a),e(s,G,a),e(s,A,a),e(s,J,a),e(s,m,a),e(s,N,a),e(s,g,a),e(s,R,a),L.m(gs,s,a),e(s,j,a),I.m(vs,s,a),e(s,E,a),e(s,D,a),e(s,Z,a),e(s,v,a),e(s,K,a),e(s,B,a),e(s,U,a),F.m(Bs,s,a),e(s,P,a),$.m(xs,s,a),e(s,q,a),e(s,x,a),e(s,Q,a),e(s,u,a),e(s,V,a),e(s,C,a),e(s,Y,a),e(s,w,a),e(s,ss,a),z.m(Cs,s,a),e(s,O,a),W.m(ws,s,a),e(s,X,a),e(s,_,a),e(s,as,a),e(s,b,a)},p:bs,d(s){s&&(n(i),n(d),n(h),n(c),n(y),n(G),n(A),n(J),n(m),n(N),n(g),n(R),n(j),L.d(),I.d(),n(E),n(D),n(Z),n(v),n(K),n(B),n(U),n(P),F.d(),$.d(),n(q),n(x),n(Q),n(u),n(V),n(C),n(Y),n(w),n(ss),n(O),z.d(),W.d(),n(X),n(_),n(as),n(b))}}}function qs(T){let i,f;const d=[T[0],As];let h={$$slots:{default:[$s]},$$scope:{ctx:T}};for(let l=0;l<d.length;l+=1)h=ns(h,d[l]);return i=new Ps({props:h}),{c(){Ss(i.$$.fragment)},l(l){Ms(i.$$.fragment,l)},m(l,c){Ls(i,l,c),f=!0},p(l,[c]){const y=c&1?Fs(d,[c&1&&us(l[0]),c&0&&us(As)]):{};c&2&&(y.$$scope={dirty:c,ctx:l}),i.$set(y)},i(l){f||(js(i.$$.fragment,l),f=!0)},o(l){Is(i.$$.fragment,l),f=!1},d(l){Es(i,l)}}}const As={title:"Beautifully render code in Svelte",description:"How I transform the code in my markdown files into beautifully rendered snippets on this site.",slug:"notes/svelte-shiki-twoslash",publish:!0,lastmod:"2024-04-24T00:00:00.000Z",date:"2024-04-07T00:00:00.000Z",aliases:null,tags:["status/budding"],readTime:5,internalLinks:[],flashcards:[]};function zs(T,i,f){return T.$$set=d=>{f(0,i=ns(ns({},i),Ds(d)))},i=Ds(i),[i]}class Js extends Ts{constructor(i){super(),Hs(this,i,zs,qs,_s,{})}}export{Js as default,As as metadata};

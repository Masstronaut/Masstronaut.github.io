import{s as T,C as f,a5 as v,f as A,a as u,I as _,e as N,g as F,u as m,c as w,K as I,i as e,A as O,d as t}from"./scheduler.73a07135.js";import{S as L,i as H,b as M,d as $,m as S,a as q,t as j,e as P}from"./index.ba10b74b.js";import{g as Z,a as x}from"./spread.8a54911c.js";import{M as K}from"./MDSveXNoteLayout.10bd5ec5.js";function R(h){let s,r='When working with union types, I often want to narrow the type to something specific. One way to do this is using <a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#assertion-functions" rel="nofollow">assertion functions</a> which assert that after they’ve been invoked, I can be certain that the type is what was asserted. The following assertion function will assert that a user is an admin:',l,i,n=`<pre class="shiki shiki-themes github-light slack-dark twoslash lsp" style="background-color:#fff;--shiki-dark-bg:#222222;color:#24292e;--shiki-dark:#E6E6E6" tabindex="0" ts twoslash highlight="[object Object]"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">function</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> </span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">function</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> assertIsAdmin</span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#E36209;--shiki-dark:#9CDCFE">user</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#24292E;--shiki-dark:#E6E6E6">)</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> asserts</span><span style="color:#E36209;--shiki-dark:#9CDCFE"> user</span><span style="color:#D73A49;--shiki-dark:#569CD6"> is</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span></span></code></span>assertIsAdmin</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#E36209;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> AdminUser</span></span></code></span>user</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "user"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>NormalUser</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "admin"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>AdminUser</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">)</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> asserts</span><span style="color:#E36209;--shiki-dark:#9CDCFE"> </span><span style="color:#E36209;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> AdminUser</span></span></code></span>user</span></span><span style="color:#D73A49;--shiki-dark:#569CD6"> is</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "admin"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>AdminUser</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C586C0">	if</span><span style="color:#24292E;--shiki-dark:#E6E6E6">( </span><span style="color:#032F62;--shiki-dark:#CE9178">"admin"</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> !==</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> </span><span style="color:#24292E;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> AdminUser</span></span></code></span>user</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">.</span><span style="color:#24292E;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">role</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#032F62;--shiki-dark:#CE9178">"user"</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#032F62;--shiki-dark:#CE9178"> "admin"</span></span></code></span>role</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6"> ) </span><span style="color:#D73A49;--shiki-dark:#C586C0">throw</span><span style="color:#D73A49;--shiki-dark:#569CD6"> new</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> </span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">var</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> Error</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> ErrorConstructor</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">new</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> (</span><span style="color:#E36209;--shiki-dark:#9CDCFE">message</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">?:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> string</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> undefined</span><span style="color:#24292E;--shiki-dark:#E6E6E6">, </span><span style="color:#E36209;--shiki-dark:#9CDCFE">options</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">?:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> ErrorOptions</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> undefined</span><span style="color:#24292E;--shiki-dark:#E6E6E6">) </span><span style="color:#D73A49;--shiki-dark:#569CD6">=></span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> Error</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> (</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">+</span><span style="color:#005CC5;--shiki-dark:#B5CEA8">1</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> overload</span><span style="color:#24292E;--shiki-dark:#E6E6E6">)</span></span></code></span>Error</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#032F62;--shiki-dark:#CE9178">"user is not an Admin"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A9955">// Notice the arrow function syntax here</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">const</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> </span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">const</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> assertIsAdmin2</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> (</span><span style="color:#E36209;--shiki-dark:#9CDCFE">user</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#24292E;--shiki-dark:#E6E6E6">) </span><span style="color:#D73A49;--shiki-dark:#569CD6">=></span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> asserts</span><span style="color:#E36209;--shiki-dark:#9CDCFE"> user</span><span style="color:#D73A49;--shiki-dark:#569CD6"> is</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span></span></code></span>assertIsAdmin2</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> (</span><span style="color:#E36209;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> AdminUser</span></span></code></span>user</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "user"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>NormalUser</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "admin"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>AdminUser</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">)</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> asserts</span><span style="color:#E36209;--shiki-dark:#9CDCFE"> </span><span style="color:#E36209;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> AdminUser</span></span></code></span>user</span></span><span style="color:#D73A49;--shiki-dark:#569CD6"> is</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "admin"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>AdminUser</span></span><span style="color:#D73A49;--shiki-dark:#569CD6"> =></span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#C586C0">  if</span><span style="color:#24292E;--shiki-dark:#E6E6E6">( </span><span style="color:#032F62;--shiki-dark:#CE9178">"admin"</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> !==</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> </span><span style="color:#24292E;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> AdminUser</span></span></code></span>user</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">.</span><span style="color:#24292E;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">role</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#032F62;--shiki-dark:#CE9178">"user"</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#032F62;--shiki-dark:#CE9178"> "admin"</span></span></code></span>role</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6"> ) </span><span style="color:#D73A49;--shiki-dark:#C586C0">throw</span><span style="color:#D73A49;--shiki-dark:#569CD6"> new</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> </span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">var</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> Error</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> ErrorConstructor</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">new</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> (</span><span style="color:#E36209;--shiki-dark:#9CDCFE">message</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">?:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> string</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> undefined</span><span style="color:#24292E;--shiki-dark:#E6E6E6">, </span><span style="color:#E36209;--shiki-dark:#9CDCFE">options</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">?:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> ErrorOptions</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> undefined</span><span style="color:#24292E;--shiki-dark:#E6E6E6">) </span><span style="color:#D73A49;--shiki-dark:#569CD6">=></span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> Error</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> (</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">+</span><span style="color:#005CC5;--shiki-dark:#B5CEA8">1</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> overload</span><span style="color:#24292E;--shiki-dark:#E6E6E6">)</span></span></code></span>Error</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#032F62;--shiki-dark:#CE9178">"user is not an Admin"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">function</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> </span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">function</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> adminOnly</span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#E36209;--shiki-dark:#9CDCFE">user</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#24292E;--shiki-dark:#E6E6E6">)</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> void</span></span></code></span>adminOnly</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#E36209;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> AdminUser</span></span></code></span>user</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "user"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>NormalUser</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "admin"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>AdminUser</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">)&#123;</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#DCDCAA">  </span><span class="twoslash-error"><span style="color:#6F42C1;--shiki-dark:#DCDCAA">assertIsAdmin2</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#24292E;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> AdminUser</span></span></code></span>user</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">);</span></span><div class="twoslash-meta-line twoslash-error-line">Assertions require every name in the call target to be declared with an explicit type annotation.</div><span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">function</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> </span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">function</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> deleteOrganization</span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#E36209;--shiki-dark:#9CDCFE">user</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#24292E;--shiki-dark:#E6E6E6">, </span><span style="color:#E36209;--shiki-dark:#9CDCFE">organizationId</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> string</span><span style="color:#24292E;--shiki-dark:#E6E6E6">)</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> void</span></span></code></span>deleteOrganization</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#E36209;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">AdminUser</span></span></code></span>user</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "admin"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>AdminUser</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">, </span><span style="color:#E36209;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">organizationId</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">string</span></span></code></span>organizationId</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> string</span><span style="color:#24292E;--shiki-dark:#E6E6E6">)&#123;</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A9955">  // ...</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">function</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> </span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">function</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> attemptDeleteOrganization</span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#E36209;--shiki-dark:#9CDCFE">user</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#24292E;--shiki-dark:#E6E6E6">, </span><span style="color:#E36209;--shiki-dark:#9CDCFE">organizationId</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> string</span><span style="color:#24292E;--shiki-dark:#E6E6E6">)</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> void</span></span></code></span>attemptDeleteOrganization</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#E36209;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> AdminUser</span></span></code></span>user</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "user"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>NormalUser</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> </span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">type</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> =</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> User</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> &#x26;</span><span style="color:#24292E;--shiki-dark:#E6E6E6"> &#123;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#9CDCFE">    role</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#032F62;--shiki-dark:#CE9178"> "admin"</span><span style="color:#24292E;--shiki-dark:#E6E6E6">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></span>AdminUser</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">, </span><span style="color:#E36209;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">organizationId</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">string</span></span></code></span>organizationId</span></span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> string</span><span style="color:#24292E;--shiki-dark:#E6E6E6">)&#123;</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#DCDCAA">	</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">function</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> assertIsAdmin</span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#E36209;--shiki-dark:#9CDCFE">user</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#24292E;--shiki-dark:#E6E6E6">)</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> asserts</span><span style="color:#E36209;--shiki-dark:#9CDCFE"> user</span><span style="color:#D73A49;--shiki-dark:#569CD6"> is</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span></span></code></span>assertIsAdmin</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#24292E;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">NormalUser</span><span style="color:#D73A49;--shiki-dark:#D4D4D4"> |</span><span style="color:#24292E;--shiki-dark:#9CDCFE"> AdminUser</span></span></code></span>user</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">);</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#DCDCAA">	</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#D73A49;--shiki-dark:#569CD6">function</span><span style="color:#6F42C1;--shiki-dark:#DCDCAA"> deleteOrganization</span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#E36209;--shiki-dark:#9CDCFE">user</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#6F42C1;--shiki-dark:#4EC9B0"> AdminUser</span><span style="color:#24292E;--shiki-dark:#E6E6E6">, </span><span style="color:#E36209;--shiki-dark:#9CDCFE">organizationId</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> string</span><span style="color:#24292E;--shiki-dark:#E6E6E6">)</span><span style="color:#D73A49;--shiki-dark:#D4D4D4">:</span><span style="color:#005CC5;--shiki-dark:#4EC9B0"> void</span></span></code></span>deleteOrganization</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">(</span><span style="color:#24292E;--shiki-dark:#9CDCFE"><span class="twoslash-hover twoslash-query-presisted"><span class="twoslash-popup-container"><div class="twoslash-popup-arrow"></div><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">user</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">AdminUser</span></span></code></span>user</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">, </span><span style="color:#24292E;--shiki-dark:#9CDCFE"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span class="line"><span style="color:#6F42C1;--shiki-dark:#E6E6E6">organizationId</span><span style="color:#24292E;--shiki-dark:#E6E6E6">: </span><span style="color:#24292E;--shiki-dark:#9CDCFE">string</span></span></code></span>organizationId</span></span><span style="color:#24292E;--shiki-dark:#E6E6E6">);</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6E6E6">&#125;</span></span></code></pre>`,o,k,b=`<pre class="code-copy-target hidden">// @errors: 2775
export type User = &#123;id: string&#125;;
export type AdminUser = User & &#123;role: "admin"&#125;;
export type NormalUser = User & &#123;role: "user"&#125;;
// ---cut---
function assertIsAdmin(user: NormalUser | AdminUser): asserts user is AdminUser &#123;
	if( "admin" !== user.role ) throw new Error("user is not an Admin");
&#125;
// Notice the arrow function syntax here
const assertIsAdmin2 = (user: NormalUser | AdminUser): asserts user is AdminUser =&gt; &#123;
  if( "admin" !== user.role ) throw new Error("user is not an Admin");
&#125;

function adminOnly(user: NormalUser | AdminUser)&#123;
  assertIsAdmin2(user);
&#125;

function deleteOrganization(user: AdminUser, organizationId: string)&#123;
  // ...
&#125;

function attemptDeleteOrganization(user: NormalUser | AdminUser, organizationId: string)&#123;
	assertIsAdmin(user);
	deleteOrganization(user, organizationId);
	//                 ^?
&#125;</pre>`,D,c,U="<code>assertIsAdmin</code> <em>asserts</em> that the <code>user</code> is an <code>AdminUser</code>. There are a couple things to note here:",y,d,B='<li>The <code>function</code> keyword is required. Notice that using <code>assertIsAdmin2</code>, the version with an arrow function, causes an error. This is because of an implementation detail of the compiler; <a href="https://github.com/microsoft/TypeScript/issues/56147#issuecomment-1768592995" rel="nofollow">the control flow graph is computed <em>before</em> type inferencing</a>.</li> <li>Any code that sits below a call to <code>assertIsAdmin</code> will have the type of <code>user</code> narrowed to <code>AdminUser</code>.</li>',C,E,g="At the bottom in <code>attemptDeleteOrganization</code>, you can see that <code>user</code>’s type has been narrowed to <code>AdminUser</code> after the call to <code>assertIsAdmin</code>.";return{c(){s=A("p"),s.innerHTML=r,l=u(),i=new _(!1),o=N(),k=new _(!1),D=u(),c=A("p"),c.innerHTML=U,y=u(),d=A("ol"),d.innerHTML=B,C=u(),E=A("p"),E.innerHTML=g,this.h()},l(a){s=F(a,"P",{["data-svelte-h"]:!0}),m(s)!=="svelte-1d5e8gd"&&(s.innerHTML=r),l=w(a),i=I(a,!1),o=N(),k=I(a,!1),D=w(a),c=F(a,"P",{["data-svelte-h"]:!0}),m(c)!=="svelte-1ju18a3"&&(c.innerHTML=U),y=w(a),d=F(a,"OL",{["data-svelte-h"]:!0}),m(d)!=="svelte-qpynp2"&&(d.innerHTML=B),C=w(a),E=F(a,"P",{["data-svelte-h"]:!0}),m(E)!=="svelte-gy7ufp"&&(E.innerHTML=g),this.h()},h(){i.a=o,k.a=D},m(a,p){e(a,s,p),e(a,l,p),i.m(n,a,p),e(a,o,p),k.m(b,a,p),e(a,D,p),e(a,c,p),e(a,y,p),e(a,d,p),e(a,C,p),e(a,E,p)},p:O,d(a){a&&(t(s),t(l),t(o),i.d(),k.d(),t(D),t(c),t(y),t(d),t(C),t(E))}}}function W(h){let s,r;const l=[h[0],z];let i={$$slots:{default:[R]},$$scope:{ctx:h}};for(let n=0;n<l.length;n+=1)i=f(i,l[n]);return s=new K({props:i}),{c(){M(s.$$.fragment)},l(n){$(s.$$.fragment,n)},m(n,o){S(s,n,o),r=!0},p(n,[o]){const k=o&1?Z(l,[o&1&&x(n[0]),o&0&&x(z)]):{};o&2&&(k.$$scope={dirty:o,ctx:n}),s.$set(k)},i(n){r||(q(s.$$.fragment,n),r=!0)},o(n){j(s.$$.fragment,n),r=!1},d(n){P(s,n)}}}const z={title:"TypeScript assertion functions increase type safety",description:"Assertion functions let the programmer narrow types using a named function, making type narrowing much more readable.",slug:"assertion-functions",publish:!0,lastmod:"2024-02-16T00:00:00.000Z",date:"2024-02-16T00:00:00.000Z",aliases:null,tags:["status/seedling"],timeToRead:1,internalLinks:[],flashcards:[]};function X(h,s,r){return h.$$set=l=>{r(0,s=f(f({},s),v(l)))},s=v(s),[s]}class Y extends L{constructor(s){super(),H(this,s,X,W,T,{})}}export{Y as default,z as metadata};

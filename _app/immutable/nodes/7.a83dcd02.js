import{s as H,f as v,a as k,l as B,g as b,h as y,u as S,c as w,m as D,d as x,j as p,i as E,v as h,n as L,A as M,o as A,J as I}from"../chunks/scheduler.95003110.js";import{S as F,i as O}from"../chunks/index.46e80ea9.js";import{e as P}from"../chunks/forms.567f33d9.js";function T(o){let t,s='<button type="submit" class="btn-primary btn">Make avatars bucket</button>',r,l;return{c(){t=v("form"),t.innerHTML=s,this.h()},l(e){t=b(e,"FORM",{method:!0,class:!0,action:!0,["data-svelte-h"]:!0}),S(t)!=="svelte-1psoapm"&&(t.innerHTML=s),this.h()},h(){p(t,"method","post"),p(t,"class","card-actions"),p(t,"action","?/createAvatarsBucket")},m(e,n){E(e,t,n),r||(l=I(P.call(null,t)),r=!0)},d(e){e&&x(t),r=!1,l()}}}function R(o){let t,s,r='<img src="https://placeimg.com/400/225/people" alt="a person" class="rounded-xl"/>',l,e,n,_="User avatar storage bucket",c,f,m,i,a=o[0]==="not-exists"&&T();return{c(){t=v("div"),s=v("figure"),s.innerHTML=r,l=k(),e=v("div"),n=v("h2"),n.textContent=_,c=k(),f=v("p"),m=B(o[1]),i=k(),a&&a.c(),this.h()},l(u){t=b(u,"DIV",{class:!0});var d=y(t);s=b(d,"FIGURE",{class:!0,["data-svelte-h"]:!0}),S(s)!=="svelte-now12z"&&(s.innerHTML=r),l=w(d),e=b(d,"DIV",{class:!0});var g=y(e);n=b(g,"H2",{class:!0,["data-svelte-h"]:!0}),S(n)!=="svelte-xyc1vx"&&(n.textContent=_),c=w(g),f=b(g,"P",{});var C=y(f);m=D(C,o[1]),C.forEach(x),i=w(g),a&&a.l(g),g.forEach(x),d.forEach(x),this.h()},h(){p(s,"class","px-10 pt-10"),p(n,"class","card-title"),p(e,"class","card-body items-center text-center"),p(t,"class","card w-96 bg-base-100 shadow-xl")},m(u,d){E(u,t,d),h(t,s),h(t,l),h(t,e),h(e,n),h(e,c),h(e,f),h(f,m),h(e,i),a&&a.m(e,null)},p(u,[d]){d&2&&L(m,u[1]),u[0]==="not-exists"?a||(a=T(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:M,o:M,d(u){u&&x(t),a&&a.d()}}}function U(o,t,s){var m;let r,l,e,{data:n}=t;(m=n.session)==null||m.user.role;const _={loading:"Checking if the avatar bucket has been created...",exists:"The avatar bucket has been created.","not-exists":"The avatar bucket hasn't been created yet."};let c="loading";console.log(e);const f=async()=>{const{data:i,error:a}=await r.storage.getBucket("avatars");a!==null?(console.log("Something went wrong getting the avatars bucket:"),console.log({error:a}),a.name==="StorageApiError"&&a.message==="The resource was not found"&&s(0,c="not-exists")):i!==null&&(console.log("Successfully got the bucket 'avatars':"),console.log({data:i}),s(0,c="exists"))};return A(async()=>{await f()}),o.$$set=i=>{"data"in i&&s(2,n=i.data)},o.$$.update=()=>{o.$$.dirty&4&&({supabase:r,session:l}=n),o.$$.dirty&1&&s(1,e=_[c])},[c,e,n]}class z extends F{constructor(t){super(),O(this,t,U,R,H,{data:2})}}export{z as component};

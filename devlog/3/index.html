<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../../_app/immutable/assets/0.6084d03f.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/NoteGridStatusFilter.144730f5.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/3.a11d3883.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/codeblock.6f10f70d.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/MDSveXNoteLayout.61812917.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.e26a13dc.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.e9e6880c.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/singletons.6b336ba0.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/paths.f7a77029.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/parse.bee59afc.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/control.f5b05b5f.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.8ad6bbc6.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper.41c905a7.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.ebf47752.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.5693a7e7.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/each.92ad7389.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.45b59163.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/navigation.8234ea68.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/toast.64129df0.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/spread.8a54911c.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/3.0338eaca.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/15.d8338b25.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/MDSveXNoteLayout.61844508.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.3e838af7.js"><!-- HEAD_svelte-cpyj77_START -->   <meta name="theme-color" content="dark"><!-- HTML_TAG_START --><script nonce="%sveltekit.nonce%">(function setInitialMode(defaultMode, themeColors2) {
  const rootEl = document.documentElement;
  const mode = localStorage.getItem("mode-watcher-mode") || defaultMode;
  const light = mode === "light" || mode === "system" && window.matchMedia("(prefers-color-scheme: light)").matches;
  rootEl.classList[light ? "remove" : "add"]("dark");
  rootEl.style.colorScheme = light ? "light" : "dark";
  if (themeColors2) {
    const themeMetaEl = document.querySelector('meta[name="theme-color"]');
    if (themeMetaEl) {
      themeMetaEl.setAttribute("content", mode === "light" ? themeColors2.light : themeColors2.dark);
    }
  }
  localStorage.setItem("mode-watcher-mode", mode);
})("system", {"dark":"dark","light":"light"});</script><!-- HTML_TAG_END --><!-- HEAD_svelte-cpyj77_END -->
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=UA-86124920-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'UA-86124920-1');
		</script>
	</head>
	<body data-sveltekit-preload-data="hover" class="bg-base-100">
		<div style="display: contents">  <div class="toaster  svelte-jyff3d"> </div> <div class="navbar bg-base-100"><div class="navbar-start"><div class="dropdown"><button tabindex="0" class="btn-ghost btn sm:hidden" data-svelte-h="svelte-1h8jdop"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg></button> <ul tabindex="0" class="dropdown-content menu rounded-box menu-sm mt-3 w-52 bg-base-100 p-2 shadow"><li><a href="/">Home</a></li><li><a href="/notes">Notes</a></li></ul></div> <a class="btn-ghost btn text-xl normal-case" href="/">Allan Deutsch</a></div> <div class="navbar-center hidden sm:flex"><ul class="menu menu-horizontal px-1 text-base"><li><a href="/">Home</a></li><li><a href="/notes">Notes</a></li></ul></div> <div class="navbar-end"> <div class="h-8" data-svelte-h="svelte-1hosge2"><a href="https://twitter.com/AllanDeutsch" class="group"><svg height="24" width="24" class="mr-1.5 inline fill-base-content transition-colors duration-300 group-hover:fill-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612"><path d="M612 116.258a250.714 250.714 0 01-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 01-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg></a> <a href="https://github.com/masstronaut" class="group"><svg height="24" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="mr-1.5 inline fill-base-content transition-colors duration-300 group-hover:fill-primary"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></div> </div></div> <div class="p-1 sm:p-4"><div class="prose mx-auto"><p data-svelte-h="svelte-ph9r0g">2024-04-28</p> <p data-svelte-h="svelte-1nwyttz">This week started out strong!</p> <ul data-svelte-h="svelte-gplcsd"><li>James &amp; I tore through the remaining lessons on web forms</li> <li>I made some improvements to allandeutsch.com in preparation for Doc Duck demos</li> <li>I learned about optimizing &amp; hosting images on the web</li></ul> <p data-svelte-h="svelte-7cnw83">On Friday I didn‚Äôt manage to get much done besides a workout, then Maya &amp; I were off to Vancouver for a weekend retreat at horseshoe bay. The view was excellent, but don‚Äôt just take my word for it:</p> <img src="https://img.allandeutsch.com/allandeutschcom-note-images/4eaa4601560a21b74f8e29b5f9dd6f2d.jpeg" alt="image"> <p data-svelte-h="svelte-1j74plk">I also bought my ticket for <a href="https://cascadiajs.com/2024" rel="nofollow">Cascadia JS</a> as part of my journey back into the conference scene. I need to get ready for my talk on type branding in a week and a half at the SeattleJS meetup. I bet there‚Äôs some sort of library for making presentations in JS so it‚Äôs easy to share on the web ü§î</p> <h2 id="epic-web-dev-course" data-svelte-h="svelte-1vakwq3"><a aria-hidden="true" tabindex="-1" href="#epic-web-dev-course"><span class="icon icon-link"></span></a><a href="#epic-web-dev-course" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Epic web dev course</h2> <p data-svelte-h="svelte-1bsquj2">I spent Monday and Tuesday working on epicweb.dev with James. We finished the module on professional web forms! This week was focused on securing forms against bad actors. I got some inspiration for open source projects to build in the svelte ecosystem - honeypot &amp; CSRF tools would be great. Maybe I‚Äôll figure out a couple hackathons to bang each of those out in.</p> <p data-svelte-h="svelte-1y79o36">We also learned about rate limiting. I‚Äôm already familiar from my time in Xbox Live &amp; PlayFab, but it was a good refresher and I learned about some solutions in the JS ecosystem.</p> <h3 id="honeypots" data-svelte-h="svelte-1o2ivok"><a aria-hidden="true" tabindex="-1" href="#honeypots"><span class="icon icon-link"></span></a><a href="#honeypots" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Honeypots</h3> <p data-svelte-h="svelte-1gimx49">Malicious bots fill out forms for a variety of reasons, such as:</p> <ul data-svelte-h="svelte-tiou9w"><li>Generate email spam using your mail server</li> <li>Post links to their own site</li> <li>Discover vulnerabilities to exploit later</li></ul> <p data-svelte-h="svelte-12maith">A common way of dealing with this is using a technique called a ‚Äúhoneypot‚Äù to identify bot-submitted forms.</p> <h3 id="csrf-protection" data-svelte-h="svelte-16s7nt7"><a aria-hidden="true" tabindex="-1" href="#csrf-protection"><span class="icon icon-link"></span></a><a href="#csrf-protection" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>CSRF protection</h3> <p data-svelte-h="svelte-c3xuxq">Cross-site request forgery is a type of attack where hackers trick users into performing an action like clicking a button on one site, which will cause them to submit a request to another site.</p> <p data-svelte-h="svelte-lrcpfj">The main way to protect from CSRF attacks is by setting a csrf cookie that contains a token for validation. The cookie gets set by the server as <code>httpOnly</code> so that malicious client-side JS can‚Äôt read its value. The server then also injects the CSRF token into any forms on the page that need to be protected. When the client submits the form, the request will contain the form data with the CSRF token as well as the request headers with the CSRF cookie. If the values in the cookie and token don‚Äôt match, the server disregards the request. Since the tokens don‚Äôt match, the server can‚Äôt verify that the request came from a user interacting with the page as intended.</p> <p data-svelte-h="svelte-1ivggtk">Before setting a CSRF cookie, check the request to see if one already exists. If it‚Äôs set on each request, it would break old tabs for users who have multiple tabs of the site open.</p> <h2 id="allandeutschcom" data-svelte-h="svelte-1bdscsw"><a aria-hidden="true" tabindex="-1" href="#allandeutschcom"><span class="icon icon-link"></span></a><a href="#allandeutschcom" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Allandeutsch.com</h2> <p data-svelte-h="svelte-a4y18o">I added filename support to my code blocks! This might seem insignificant, but there are certain cases where the filename is very important. It‚Äôs very common in web development for libraries to have naming conventions. Sveltekit for example requires page components to be named <code>+page.svelte</code>, so knowing that is the filename conveys important meaning about the file. Some other examples:</p> <ul data-svelte-h="svelte-17hmzfg"><li>The eslint config file must be named one of <a href="https://eslint.org/docs/latest/use/configure/configuration-files#configuration-file" rel="nofollow">a few options</a> such as <code>eslint.config.js</code></li> <li>Configuring svelte must be done in <code>svelte.config.js</code></li> <li>a <code>.gitignore</code> file tells git which directories and files should not be tracked</li></ul> <p data-svelte-h="svelte-uolr4d">I updated a couple notes to showcase the codeblock file names:</p> <ul data-svelte-h="svelte-xs1vh4"><li><a href="/notes/svelte-shiki-twoslash/">Beautifully render markdown code blocks in Svelte</a></li> <li><a href="/notes/lint-format-svelte/">Linting and formatting a svelte typescript project</a></li></ul> <p data-svelte-h="svelte-16f6e8">This is how it looks in your current color scheme:</p> <picture data-svelte-h="svelte-1dfay5r"><source media="(prefers-color-scheme: dark)" srcset="https://img.allandeutsch.com/allandeutschcom-note-images/405bfdcf0bbab7a0a8034d1a416b0f09.png"> <source media="(prefers-color-scheme: light )" srcset="https://img.allandeutsch.com/allandeutschcom-note-images/79b94f9fcf9df49c037b6920bbfba95e.png"> <img alt="A code block on allandeutsch.com rendered to show the filename in a tab along the top bar of the code block"></picture> <p data-svelte-h="svelte-17yn54n">On a related note, the light and dark mode versions are not rendered as code blocks, but as images! This is a new feature in my publishing pipeline, and I‚Äôm excited to start adding more images around here.</p> <p data-svelte-h="svelte-t8tpwr">I use an obsidian plugin called <a href="https://github.com/jvsteiner/s3-image-uploader" rel="nofollow">s3-image-uploader</a> to automatically upload images I paste or drag into obsidian (the tool I use for writing notes) and insert the image embedding link into the markdown for my note. I use a cloudflare R2 bucket which is s3-compatible to host the images. The bucket contents are exposed on img.allandeutsch.com. Now when I publish a note with an embedded image, the image is linked on the internet and available on my site to viewers like you!</p> <h2 id="doc-duck" data-svelte-h="svelte-12rebzx"><a aria-hidden="true" tabindex="-1" href="#doc-duck"><span class="icon icon-link"></span></a><a href="#doc-duck" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Doc Duck</h2> <h3 id="feedback-context-links" data-svelte-h="svelte-1ibwufy"><a aria-hidden="true" tabindex="-1" href="#feedback-context-links"><span class="icon icon-link"></span></a><a href="#feedback-context-links" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Feedback context links</h3> <p data-svelte-h="svelte-hdn10i">Doc Duck lets developers provide feedback on a specific <em>selection</em> of a document. When a Doc Duck customer is viewing that feedback, it‚Äôs helpful to see the selection in context <em>in the document</em>. So I did that:</p> <img src="https://img.allandeutsch.com/allandeutschcom-note-images/922324c6c65793f85a6e6911f95dceb6.webp" alt="image"> <p data-svelte-h="svelte-13oupzf">This week I‚Äôve also been working on <em>content</em> for the landing page. My vision is to show visitors what the world looks like with a documentation feedback process powered by Doc Duck. This means setting up demos and recording short clips of the core interactions. It‚Äôs super important to me to nail this because it‚Äôs the first and likely only chance I will get to convince someone of the value of Doc Duck.</p> <h2 id="next-week" data-svelte-h="svelte-1436nen"><a aria-hidden="true" tabindex="-1" href="#next-week"><span class="icon icon-link"></span></a><a href="#next-week" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Next week</h2> <p data-svelte-h="svelte-jsu1ls">Looking forward, I‚Äôve got some big things to accomplish:</p> <ol data-svelte-h="svelte-12aag8"><li>Apply to the startup fair at Cascadia JS. This is the most important because it could single-handedly make my year if I play it well</li> <li>Ship the beta Doc Duck landing page. I think this is a critical piece of nailing the CascadiaJS application</li> <li>Build a cost-benefit-significance graph for bike infrastructure upgrade projects for the sustainable transit project</li></ol> <p data-svelte-h="svelte-od6trv">If I nail the first two the week is a win, but there are a lot of dependencies leading up to that startup fair application. There are a few features that aren‚Äôt quite demo ready yet; I‚Äôll need to bridge that gap, then record the demos, then add the demos to the landing page, then apply for the startup fair. No biggie, I got this‚Ä¶ üòÖ</p> <p data-svelte-h="svelte-1it4v9p">‚Ä¶And I‚Äôve also got a flight Thursday morning to Omaha for the Berkshire Hathaway shareholders meeting; It‚Äôs effectively a 3 day week. <strong><em>furious typing ensues</em></strong></p> </div></div>  
			
			<script>
				{
					__sveltekit_g2kkmt = {
						base: new URL("../..", location).pathname.slice(0, -1),
						env: {"PUBLIC_SUPABASE_ANON_KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFlb3ZmZXRyaXNyZnFpZWF0bXp3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODcwNjM0NTYsImV4cCI6MjAwMjYzOTQ1Nn0.s9KXOQ0gDdl7e3lTUxdN5yfPI0rLZ-dSRMfEwoHhK00","PUBLIC_SUPABASE_URL":"https://aeovfetrisrfqieatmzw.supabase.co"}
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":{session:null,user:null},"uses":{}},null,null];

					Promise.all([
						import("../../_app/immutable/entry/start.e26a13dc.js"),
						import("../../_app/immutable/entry/app.8ad6bbc6.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3, 15],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>

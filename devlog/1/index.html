<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../../_app/immutable/assets/0.6084d03f.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/NoteGridStatusFilter.144730f5.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/3.a11d3883.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/codeblock.72bea1ad.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/MDSveXNoteLayout.61812917.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.1aa1ecb7.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.e9e6880c.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/singletons.d4516427.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/paths.d08a698f.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/parse.bee59afc.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/control.f5b05b5f.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.f12d56fc.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper.41c905a7.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.ebf47752.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.38f649c1.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/each.92ad7389.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.45b59163.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/navigation.c91a28bb.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/toast.beccb5d7.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/spread.8a54911c.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/3.0ed19908.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/13.5c522437.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/MDSveXNoteLayout.79b90527.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.3e838af7.js"><!-- HEAD_svelte-cpyj77_START -->   <meta name="theme-color" content="dark"><!-- HTML_TAG_START --><script nonce="%sveltekit.nonce%">(function setInitialMode(defaultMode, themeColors2) {
  const rootEl = document.documentElement;
  const mode = localStorage.getItem("mode-watcher-mode") || defaultMode;
  const light = mode === "light" || mode === "system" && window.matchMedia("(prefers-color-scheme: light)").matches;
  rootEl.classList[light ? "remove" : "add"]("dark");
  rootEl.style.colorScheme = light ? "light" : "dark";
  if (themeColors2) {
    const themeMetaEl = document.querySelector('meta[name="theme-color"]');
    if (themeMetaEl) {
      themeMetaEl.setAttribute("content", mode === "light" ? themeColors2.light : themeColors2.dark);
    }
  }
  localStorage.setItem("mode-watcher-mode", mode);
})("system", {"dark":"dark","light":"light"});</script><!-- HTML_TAG_END --><!-- HEAD_svelte-cpyj77_END -->
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=UA-86124920-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'UA-86124920-1');
		</script>
	</head>
	<body data-sveltekit-preload-data="hover" class="bg-base-100">
		<div style="display: contents">  <div class="toaster  svelte-jyff3d"> </div> <div class="navbar bg-base-100"><div class="navbar-start"><div class="dropdown"><button tabindex="0" class="btn-ghost btn sm:hidden" data-svelte-h="svelte-1h8jdop"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg></button> <ul tabindex="0" class="dropdown-content menu rounded-box menu-sm mt-3 w-52 bg-base-100 p-2 shadow"><li><a href="/">Home</a></li><li><a href="/notes">Notes</a></li></ul></div> <a class="btn-ghost btn text-xl normal-case" href="/">Allan Deutsch</a></div> <div class="navbar-center hidden sm:flex"><ul class="menu menu-horizontal px-1 text-base"><li><a href="/">Home</a></li><li><a href="/notes">Notes</a></li></ul></div> <div class="navbar-end"> <div class="h-8" data-svelte-h="svelte-1hosge2"><a href="https://twitter.com/AllanDeutsch" class="group"><svg height="24" width="24" class="mr-1.5 inline fill-base-content transition-colors duration-300 group-hover:fill-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612"><path d="M612 116.258a250.714 250.714 0 01-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 01-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg></a> <a href="https://github.com/masstronaut" class="group"><svg height="24" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="mr-1.5 inline fill-base-content transition-colors duration-300 group-hover:fill-primary"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></div> </div></div> <div class="p-1 sm:p-4"><div class="prose mx-auto"><p data-svelte-h="svelte-1c9pg0l">2024-04-14</p> <h2 id="code-block-copy-button" data-svelte-h="svelte-n4yw7h"><a aria-hidden="true" tabindex="-1" href="#code-block-copy-button"><span class="icon icon-link"></span></a><a href="#code-block-copy-button" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Code block copy button</h2> <p data-svelte-h="svelte-19dvy7m">Code blocks on <a href="https://allandeutsch.com" rel="nofollow">allandeutsch.com</a> now have a copy code button!</p> <p data-svelte-h="svelte-1m4s4jw">I previously had copy code buttons, but I when I upgraded to using <a href="https://shiki.style/packages/twoslash" rel="nofollow">@shikijs/twoslash</a> it broke them in a couple ways. First, the output HTML changed and broke my query selectors - that was an easy fix. Slightly more interesting is that typescript code blocks that are augmented with type information by <a href="https://twoslash.netlify.app/" rel="nofollow">twoslash</a> processing. Previously I was selecting the <code>innerText</code> to grab only the code, but twoslash adds additional elements (and <code>innerText</code>) that contain the type information. I don’t want all of that on the clipboard when copying a code snippet! To fix this I put a <code>pre</code> element with the class <code>code-copy-target</code> after each code block rendered by shiki. I inject the raw code from my markdown code block into the <code>innerText</code> of that node. The copy button gets the text from that node instead of the pretty code block. I also set its display to hidden so it doesn’t disrupt the view of the page and won’t be read by screen readers. I also needed to escape a few characters like <code>&lt;</code> and <code>&gt;</code> with their HTML escape code equivalents so that code snippets with angle brackets don’t break the page HTML.</p> <h2 id="detailed-feedback-view-page" data-svelte-h="svelte-1abwant"><a aria-hidden="true" tabindex="-1" href="#detailed-feedback-view-page"><span class="icon icon-link"></span></a><a href="#detailed-feedback-view-page" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Detailed feedback view page</h2> <p data-svelte-h="svelte-x90agy"><a href="https://penguinsight.com" rel="nofollow">Penguinsight</a> now has a page for viewing detailed information about feedback. Clicking the link to view the original document now highlights the section of the page that feedback was provided for. I’m really excited about this because it’s such useful context for reviewing feedback</p> <h2 id="automatic-linting--formatting-update" data-svelte-h="svelte-nqs6re"><a aria-hidden="true" tabindex="-1" href="#automatic-linting--formatting-update"><span class="icon icon-link"></span></a><a href="#automatic-linting--formatting-update" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Automatic linting &amp; formatting update</h2> <p data-svelte-h="svelte-11ll8pi">My setup for Prettier and ESLint has been broken for about a month and the lack of auto-formatting has been driving me crazy. This week I’ve been working through Kent’s <a href="https://epicweb.dev" rel="nofollow">Epic Web Dev</a> course with a friend, and being reminded of how nice it is to have a working linter &amp; formatter was the final straw.</p> <p data-svelte-h="svelte-1hkdi2">I finally got around to fixing the config for ESLint &amp; Prettier on Penguinsight. This was more work than I expected; ESLint switched to a new <a href="https://eslint.org/docs/latest/extend/plugin-migration-flat-config" rel="nofollow">flat config</a> format which I’ve now adopted. I wasn’t able to upgrade to the latest ESLint 9.0.0 because <a href="https://github.com/typescript-eslint/typescript-eslint/issues/8211" rel="nofollow">typescript-eslint doesn’t support it yet</a>, but I did manage to get <a href="https://typescript-eslint.io/getting-started/typed-linting" rel="nofollow">linting with type information</a> working which helped me catch a few potential bugs already.</p> <p data-svelte-h="svelte-1hrjl7p">For the full details, check out how I set up <a href="https://allandeutsch.com/notes/lint-format-svelte/" rel="nofollow">linting and formatting a svelte project</a>.</p> </div></div>  
			
			<script>
				{
					__sveltekit_1x0pcpe = {
						base: new URL("../..", location).pathname.slice(0, -1),
						env: {"PUBLIC_SUPABASE_ANON_KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFlb3ZmZXRyaXNyZnFpZWF0bXp3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODcwNjM0NTYsImV4cCI6MjAwMjYzOTQ1Nn0.s9KXOQ0gDdl7e3lTUxdN5yfPI0rLZ-dSRMfEwoHhK00","PUBLIC_SUPABASE_URL":"https://aeovfetrisrfqieatmzw.supabase.co"}
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":{session:null,user:null},"uses":{}},null,null];

					Promise.all([
						import("../../_app/immutable/entry/start.1aa1ecb7.js"),
						import("../../_app/immutable/entry/app.f12d56fc.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3, 13],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>

<!DOCTYPE html>
<html lang="en" data-theme="">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../../_app/immutable/assets/0.a7e58128.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/NoteGridStatusFilter.d210e4e4.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/13.5765f4ee.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/LoadNote.61812917.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.742dc37d.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.95003110.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/singletons.29bc8fcd.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/paths.657e17ae.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/parse.bee59afc.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/control.f5b05b5f.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.5564af23.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper.41c905a7.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.46e80ea9.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.5e08322a.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/each.fce2738d.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.45b59163.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/navigation.ce4a9061.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/toast.db6e2068.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/spread.8a54911c.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/13.e9649eec.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/LoadNote.7e6ad53f.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.a2bcfa65.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/stores.fe3d9437.js"><title>Svelte component APIs - Allan Deutsch</title><!-- HEAD_svelte-n5ip0u_START --><meta name="description" content="There are many ways to Svelte a component..."><meta property="og:title" content="Svelte component APIs"><meta property="og:type" content="article"><meta property="og:url" content="https://allandeutsch.com/notes/svelte-component-apis"><meta property="og:description" content="There are many ways to Svelte a component..."><meta property="og:locale" content="en_US"><meta property="twitter:card" content="summary"><meta property="twitter:url" content="https://allandeutsch.com"><meta property="twitter:title" content="Svelte component APIs"><meta property="twitter:description" content="There are many ways to Svelte a component..."><meta property="twitter:site" content="@AllanDeutsch"><meta property="twitter:creator" content="@AllanDeutsch"><link rel="canonical" href="https://allandeutsch.com/notes/svelte-component-apis"><script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="AllanDeutsch" data-description="Support me on Buy me a coffee!" data-message="" data-color="#5F7FFF" data-position="Right" data-x_margin="18" data-y_margin="18" data-svelte-h="svelte-bv2cpr"></script><!-- HEAD_svelte-n5ip0u_END -->
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=UA-86124920-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'UA-86124920-1');
		</script>
		<script src="https://www.penguinsight.com/thumbs.js" type="module"></script>
	</head>
	<body data-sveltekit-preload-data="hover" class="bg-base-100">
		<div style="display: contents">  <div class="toaster  svelte-jyff3d"> </div> <div class="navbar bg-base-100"><div class="navbar-start"><div class="dropdown"><button tabindex="0" class="btn-ghost btn sm:hidden" data-svelte-h="svelte-1h8jdop"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg></button> <ul tabindex="0" class="dropdown-content menu rounded-box menu-sm mt-3 w-52 bg-base-100 p-2 shadow"><li><a href="/">Home</a></li><li><a href="/notes">Notes</a></li></ul></div> <a class="btn-ghost btn text-xl normal-case" href="/">Allan Deutsch</a></div> <div class="navbar-center hidden sm:flex"><ul class="menu menu-horizontal px-1 text-base"><li><a href="/">Home</a></li><li><a href="/notes">Notes</a></li></ul></div> <div class="navbar-end"> <div class="h-8" data-svelte-h="svelte-b95tle"><a href="https://twitter.com/AllanDeutsch" class="group"><svg height="24" width="24" class="mr-1.5 inline transition-colors duration-300 group-hover:fill-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612"><path d="M612 116.258a250.714 250.714 0 01-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 01-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg></a> <a href="https://github.com/masstronaut" class="group"><svg height="24" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="mr-1.5 inline transition-colors duration-300 group-hover:fill-primary"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></div> </div></div> <div class="p-1 sm:p-4"> <article class="note-container prose mb-8 max-w-full svelte-1k3b05m"><header class="w-full max-w-3xl self-center"><h1 class="mb-8 text-left text-4xl font-bold">Svelte component APIs</h1> <div class="border-t-neutral text-base-content text-md mb-12 mt-4 flex justify-between border-t border-opacity-20 pt-1"><div><span class="pr-2" data-svelte-h="svelte-114jejz">üå±</span><span class="hidden sm:inline" data-svelte-h="svelte-1psjisz">Planted
				</span>February 6, 2024.
				</div> <div class="flex flex-col items-end"><div class="note__status seedling svelte-1k3b05m">seedling üå±</div> <div>1 minute read ‚è±</div></div></div></header>  <p data-svelte-h="svelte-1eh5o8t">There are a handful of possible approaches to designing the API for a svelte component. I document the ones I‚Äôve encountered and my thoughts on them here. If there is a more widely-used name for any of them, or there is a design I‚Äôm missing, please <a href="https://twitter.com/AllanDeutsch" rel="nofollow">let me know</a>!</p> <ul data-svelte-h="svelte-7omskk"><li>Self-contained component</li> <li>Slot component</li> <li>Fragmented component</li> <li>Nesting doll component</li></ul> <h2 id="self-contained-component" data-svelte-h="svelte-1sfor7n"><a aria-hidden="true" tabindex="-1" href="#self-contained-component"><span class="icon icon-link"></span></a><a href="#self-contained-component" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Self-contained component</h2> <!-- HTML_TAG_START --><div class="mockup-code pl-4 relative group bg-[--b3] border border-base-content/25"><pre class="shiki " style="background-color: #fff" tabindex="0"><code><span class="line"><span style="color: #24292E">&lt;</span><span style="color: #22863A">script</span><span style="color: #24292E"> </span><span style="color: #6F42C1">lang</span><span style="color: #24292E">=</span><span style="color: #032F62">&quot;ts&quot;</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	</span><span style="color: #D73A49">import</span><span style="color: #24292E"> &lbrace;Accordion&rbrace; </span><span style="color: #D73A49">from</span><span style="color: #24292E"> </span><span style="color: #032F62">&#39;$lib/components&#39;</span></span>
<span class="line"><span style="color: #24292E">	</span><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">accordionData</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> [&lbrace;</span></span>
<span class="line"><span style="color: #24292E">		title: </span><span style="color: #032F62">&quot;Click to expand&quot;</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">		content: </span><span style="color: #032F62">&quot;Hello, world&quot;</span></span>
<span class="line"><span style="color: #24292E">	&rbrace;, &lbrace; </span></span>
<span class="line"><span style="color: #24292E">		title: </span><span style="color: #032F62">&quot;I expand too!&quot;</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">		content: </span><span style="color: #032F62">&quot;Click me again to make me collapse&quot;</span></span>
<span class="line"><span style="color: #24292E">	&rbrace;]</span></span>
<span class="line"><span style="color: #24292E">&lt;/</span><span style="color: #22863A">script</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">&lt;</span><span style="color: #B31D28; font-style: italic">Accordion</span><span style="color: #24292E"> </span><span style="color: #6F42C1">items</span><span style="color: #24292E">=</span><span style="color: #032F62">&lbrace;accordionData&rbrace;</span><span style="color: #24292E"> /&gt;</span></span></code></pre></div><!-- HTML_TAG_END --> <p data-svelte-h="svelte-ddr3x">Self-contained components tend to have minimal APIs, typically defined in a single file. I‚Äôve found them the easiest to read and understand within my own codebase. They also have great error messaging when used improperly: not providing <code>items</code> or providing <code>items</code> of the wrong type both result in typescript errors. However, the minimal API of self-contained components offers minimal flexibility to consumers. The consumer is unable to do any customization not explicitly supported by the API. Adding a button in the first accordion item (as was done with the #Fragmented component API) can‚Äôt be done without changing the <code>Accordion</code> API, which also has no way to style nested elements like the accordion items. While it‚Äôs possible to work around this limitation, doing so would require a much less minimal API:</p> <ul data-svelte-h="svelte-1z8ir4"><li>Optional styles for each item passed to <code>items</code></li> <li>Accepting a <code>SvelteComponent</code> as an option for the <code>items</code> prop (which would require each item be defined in a separate component file)</li> <li>Having a way to pass nested styles to the <code>Accordion</code> component</li></ul> <p data-svelte-h="svelte-19mft4q">I find all of these are very unpleasant ways to customize a component, so I believe this API design is best for single-use components at the application layer that can afford to be stubbornly opinionated.</p> <h2 id="slot-component" data-svelte-h="svelte-1bvaq8v"><a aria-hidden="true" tabindex="-1" href="#slot-component"><span class="icon icon-link"></span></a><a href="#slot-component" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Slot component</h2> <!-- HTML_TAG_START --><div class="mockup-code pl-4 relative group bg-[--b3] border border-base-content/25"><pre class="shiki " style="background-color: #fff" tabindex="0"><code><span class="line"><span style="color: #24292E">&lt;</span><span style="color: #22863A">script</span><span style="color: #24292E"> </span><span style="color: #6F42C1">lang</span><span style="color: #24292E">=</span><span style="color: #032F62">&quot;ts&quot;</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	</span><span style="color: #D73A49">import</span><span style="color: #24292E"> &lbrace;Accordion, AccordionItem&rbrace; </span><span style="color: #D73A49">from</span><span style="color: #24292E"> </span><span style="color: #032F62">&#39;$lib/components&#39;</span></span>
<span class="line"><span style="color: #24292E">&lt;/</span><span style="color: #22863A">script</span><span style="color: #24292E">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">&lt;</span><span style="color: #B31D28; font-style: italic">Accordion</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;</span><span style="color: #B31D28; font-style: italic">AccordionItem</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #22863A">h2</span><span style="color: #24292E"> </span><span style="color: #6F42C1">slot</span><span style="color: #24292E">=</span><span style="color: #032F62">&quot;title&quot;</span><span style="color: #24292E">&gt;Click to expand&lt;/</span><span style="color: #22863A">h2</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		</span><span style="color: #6A737D">&lt;!-- Instead of a fragment, this could&#39;ve been a</span></span>
<span class="line"><span style="color: #6A737D">		- component</span></span>
<span class="line"><span style="color: #6A737D">		- div</span></span>
<span class="line"><span style="color: #6A737D">		- or any other element --&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #B31D28; font-style: italic">svelte:fragment</span><span style="color: #24292E"> </span><span style="color: #6F42C1">slot</span><span style="color: #24292E">=</span><span style="color: #032F62">&quot;content&quot;</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			&lt;</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;Hello, world&lt;/</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			&lt;</span><span style="color: #22863A">button</span><span style="color: #24292E">&gt;Click me&lt;/</span><span style="color: #22863A">button</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;/</span><span style="color: #B31D28; font-style: italic">svelte:fragment</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;/</span><span style="color: #B31D28; font-style: italic">AccordionItem</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;</span><span style="color: #B31D28; font-style: italic">AccordionItem</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #22863A">h2</span><span style="color: #24292E"> </span><span style="color: #6F42C1">slot</span><span style="color: #24292E">=</span><span style="color: #032F62">&quot;title&quot;</span><span style="color: #24292E">&gt;I expand too!&lt;/</span><span style="color: #22863A">h2</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #B31D28; font-style: italic">svelte:fragment</span><span style="color: #24292E"> </span><span style="color: #6F42C1">slot</span><span style="color: #24292E">=</span><span style="color: #032F62">&quot;content&quot;</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			&lt;</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;Click me again to make me collapse&lt;/</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;/</span><span style="color: #B31D28; font-style: italic">svelte:fragment</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;/</span><span style="color: #B31D28; font-style: italic">AccordionItem</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">&lt;/</span><span style="color: #B31D28; font-style: italic">Accordion</span><span style="color: #24292E">&gt;</span></span></code></pre></div><!-- HTML_TAG_END --> <p data-svelte-h="svelte-bc5jpf"><a href="https://svelte.dev/docs/special-elements#slot" rel="nofollow">Svelte slots</a> are a great way for components to allow consumers to provide nested content that doesn‚Äôt all get treated the same way.</p> <h2 id="fragmented-component" data-svelte-h="svelte-17yxhtp"><a aria-hidden="true" tabindex="-1" href="#fragmented-component"><span class="icon icon-link"></span></a><a href="#fragmented-component" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Fragmented component</h2> <!-- HTML_TAG_START --><div class="mockup-code pl-4 relative group bg-[--b3] border border-base-content/25"><pre class="shiki " style="background-color: #fff" tabindex="0"><code><span class="line"><span style="color: #24292E">&lt;</span><span style="color: #22863A">script</span><span style="color: #24292E"> </span><span style="color: #6F42C1">lang</span><span style="color: #24292E">=</span><span style="color: #032F62">&quot;ts&quot;</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	</span><span style="color: #D73A49">import</span><span style="color: #24292E"> &lbrace;Accordion&rbrace; </span><span style="color: #D73A49">from</span><span style="color: #24292E"> </span><span style="color: #032F62">&#39;$lib/components&#39;</span></span>
<span class="line"><span style="color: #24292E">&lt;/</span><span style="color: #22863A">script</span><span style="color: #24292E">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">&lt;</span><span style="color: #B31D28; font-style: italic">Accordion.Root</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;</span><span style="color: #B31D28; font-style: italic">Accordion.Item</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #B31D28; font-style: italic">Accordion.Title</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			Click to expand</span></span>
<span class="line"><span style="color: #24292E">		&lt;/</span><span style="color: #B31D28; font-style: italic">Accordion.Title</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #B31D28; font-style: italic">Accordion.Content</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			&lt;</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;Hello, world&lt;/</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			&lt;</span><span style="color: #22863A">button</span><span style="color: #24292E">&gt;Click me&lt;/</span><span style="color: #22863A">button</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;/</span><span style="color: #B31D28; font-style: italic">Accordion.Content</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;/</span><span style="color: #B31D28; font-style: italic">Accordion.Item</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;</span><span style="color: #B31D28; font-style: italic">Accordion.Item</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #B31D28; font-style: italic">Accordion.Title</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			I expand too!</span></span>
<span class="line"><span style="color: #24292E">		&lt;/</span><span style="color: #B31D28; font-style: italic">Accordion.Title</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #B31D28; font-style: italic">Accordion.Content</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			&lt;</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;Click me again to make me collapse&lt;/</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;/</span><span style="color: #B31D28; font-style: italic">Accordion.Content</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;/</span><span style="color: #B31D28; font-style: italic">Accordion.Item</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">&lt;/</span><span style="color: #B31D28; font-style: italic">Accordion.Root</span><span style="color: #24292E">&gt;</span></span>
<span class="line"></span></code></pre></div><!-- HTML_TAG_END --> <p data-svelte-h="svelte-ildss7">Component fragments offer a clean API with great flexibility for the consumer to provide custom styling and child content. While this example makes the API appear highly verbose, in many cases the <code>Accordion.Item</code>s could be put in an <code>#each</code> block to minimize the boilerplate.</p> <p data-svelte-h="svelte-ko21iu">Fragmented components are more error prone. Fragments can be used improperly, such as with the wrong nesting or by not including required children. I‚Äôm not aware of a way to provide good error messaging like <code>Accordion error: Content was not provided</code>, though Nesting doll components can enforce the correct nesting hierarchy. The design also makes components with non-trivial state more complicated. If I wanted the accordion to only allow 1 item to be expanded at a time, either the consuming code would need to wire a lot of props and values, or the Accordion components would need to use the context API to handle state since it‚Äôs not a Self-contained component.</p> <p data-svelte-h="svelte-ymnjs0">Due to the high level of customizability, I think this approach is best for lower-level uses like component libraries where a less opinionated approach is best. It offers a lot of flexibility to downstream consumers of the component.</p> <h2 id="nesting-doll-component" data-svelte-h="svelte-1s6xnwe"><a aria-hidden="true" tabindex="-1" href="#nesting-doll-component"><span class="icon icon-link"></span></a><a href="#nesting-doll-component" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Nesting doll component</h2> <!-- HTML_TAG_START --><div class="mockup-code pl-4 relative group bg-[--b3] border border-base-content/25"><pre class="shiki " style="background-color: #fff" tabindex="0"><code><span class="line"><span style="color: #24292E">&lt;</span><span style="color: #22863A">script</span><span style="color: #24292E"> </span><span style="color: #6F42C1">lang</span><span style="color: #24292E">=</span><span style="color: #032F62">&quot;ts&quot;</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	</span><span style="color: #D73A49">import</span><span style="color: #24292E"> &lbrace;Accordion&rbrace; </span><span style="color: #D73A49">from</span><span style="color: #24292E"> </span><span style="color: #032F62">&#39;$lib/components&#39;</span></span>
<span class="line"><span style="color: #24292E">&lt;/</span><span style="color: #22863A">script</span><span style="color: #24292E">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292E">&lt;</span><span style="color: #B31D28; font-style: italic">Accordion</span><span style="color: #24292E"> </span><span style="color: #6F42C1">let:Item</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;</span><span style="color: #B31D28; font-style: italic">Item</span><span style="color: #24292E"> </span><span style="color: #6F42C1">let:Title</span><span style="color: #24292E"> </span><span style="color: #6F42C1">let:Content</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #22863A">Title</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			Click to expand</span></span>
<span class="line"><span style="color: #24292E">		&lt;/</span><span style="color: #22863A">Title</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #B31D28; font-style: italic">Content</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			&lt;</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;Hello, world&lt;/</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			&lt;</span><span style="color: #22863A">button</span><span style="color: #24292E">&gt;Click me&lt;/</span><span style="color: #22863A">button</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;/</span><span style="color: #B31D28; font-style: italic">Content</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;/</span><span style="color: #B31D28; font-style: italic">Item</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;</span><span style="color: #B31D28; font-style: italic">Item</span><span style="color: #24292E"> </span><span style="color: #6F42C1">let:Title</span><span style="color: #24292E"> </span><span style="color: #6F42C1">let:Content</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #22863A">Title</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			I expand too!</span></span>
<span class="line"><span style="color: #24292E">		&lt;/</span><span style="color: #22863A">Title</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;</span><span style="color: #B31D28; font-style: italic">Content</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">			&lt;</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;Click me again to make me collapse&lt;/</span><span style="color: #22863A">p</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">		&lt;/</span><span style="color: #B31D28; font-style: italic">Content</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">	&lt;/</span><span style="color: #B31D28; font-style: italic">Item</span><span style="color: #24292E">&gt;</span></span>
<span class="line"><span style="color: #24292E">&lt;/</span><span style="color: #B31D28; font-style: italic">Accordion</span><span style="color: #24292E">&gt;</span></span></code></pre></div><!-- HTML_TAG_END --> <p data-svelte-h="svelte-7wo1u8">This design has many of the benefits of Fragmented components, and in some cases a less verbose API (no more <code>Accordion.</code> for each child element). Where I think it truly outshines is how it reduces the opportunity for incorrect usage of nested child components. It‚Äôs impossible to put an Accordion <code>Item</code> outside of an <code>Accordion</code> component, because the only way to access the <code>Item</code> component is <em>inside</em> an <code>Accordion</code>. The same is true of the <code>Title</code> and <code>Content</code> of an <code>Item</code>. The Svelte Language Server also provides IntelliSense hints about nested components; the IDE can therefore tell you that <code>let:Item</code> is available on <code>Accordion</code>. This is the magic of nesting doll components!</p> <p data-svelte-h="svelte-1pe22ht">I‚Äôm not sure if this approach supports tree-shaking; if not, it may unnecessarily increase bundle size if not all of the nested components are used. It also shares most of the downsides of Fragmented components:</p> <ul data-svelte-h="svelte-8r8wmc"><li>Limited error messaging <ul><li>it‚Äôs possible to use them incorrectly without errors</li></ul></li> <li>Somewhat verbose API</li> <li>Increased complexity for components that use state across nested components</li></ul> <div class="divider"></div> <aside class="prose"><h2 class="prose-h2:text-lg" data-svelte-h="svelte-128y7pj">Feedback</h2> <p data-svelte-h="svelte-171xzz7">Thanks for reading this, I hope it has helped you in some way. I&#39;d love it
			if you would share your feedback with my by using one of the buttons
			below. It only takes a second, and whether you love it or hate it, the
			feedback helps me write better content in the future!</p> <pi-thumb user="(anonymous)" path="notes/svelte-component-apis" team="d6101342-650f-443e-893a-0bcb31bd8da9"></pi-thumb> <p data-svelte-h="svelte-s9yh0w">If you&#39;re feeling extra generous, you can show your support by buying me a
			coffee with the button in the bottom right corner of the page.</p> <div class="divider"></div></aside></article>     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous"></div>  
			
			<script>
				{
					__sveltekit_lq5yet = {
						base: new URL("../..", location).pathname.slice(0, -1),
						env: {"PUBLIC_SUPABASE_ANON_KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFlb3ZmZXRyaXNyZnFpZWF0bXp3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODcwNjM0NTYsImV4cCI6MjAwMjYzOTQ1Nn0.s9KXOQ0gDdl7e3lTUxdN5yfPI0rLZ-dSRMfEwoHhK00","PUBLIC_SUPABASE_URL":"https://aeovfetrisrfqieatmzw.supabase.co"}
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":{session:null,user:null},"uses":{}},null];

					Promise.all([
						import("../../_app/immutable/entry/start.742dc37d.js"),
						import("../../_app/immutable/entry/app.5564af23.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 13],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>

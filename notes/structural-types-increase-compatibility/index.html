<!DOCTYPE html>
<html lang="en" data-theme="">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../../_app/immutable/assets/0.c0915e16.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/NoteGridStatusFilter.d210e4e4.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/13.1d26afe6.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/LoadNote.61812917.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.835672ac.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.95003110.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/singletons.6bfa90a1.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/paths.d92b24e8.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/parse.bee59afc.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/control.f5b05b5f.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.56a1ee55.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper.41c905a7.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.46e80ea9.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.fdd94847.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/each.fce2738d.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.45b59163.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/navigation.4841aa1e.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/toast.34ddaef3.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/spread.8a54911c.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/13.95167e29.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/LoadNote.7758c4fc.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.a2bcfa65.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/stores.cad8e237.js"><title>Structural types increase data compatibility - Allan Deutsch</title><!-- HEAD_svelte-n5ip0u_START --><meta name="description" content="Structural types are only concerned with the shape of data, rather than the names of types. This makes data types more compatible."><meta property="og:title" content="Structural types increase data compatibility"><meta property="og:type" content="article"><meta property="og:url" content="https://allandeutsch.com/notes/structural-types-increase-compatibility"><meta property="og:description" content="Structural types are only concerned with the shape of data, rather than the names of types. This makes data types more compatible."><meta property="og:locale" content="en_US"><meta property="twitter:card" content="summary"><meta property="twitter:url" content="https://allandeutsch.com"><meta property="twitter:title" content="Structural types increase data compatibility"><meta property="twitter:description" content="Structural types are only concerned with the shape of data, rather than the names of types. This makes data types more compatible."><meta property="twitter:site" content="@AllanDeutsch"><meta property="twitter:creator" content="@AllanDeutsch"><link rel="canonical" href="https://allandeutsch.com/notes/structural-types-increase-compatibility"><script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="AllanDeutsch" data-description="Support me on Buy me a coffee!" data-message="" data-color="#5F7FFF" data-position="Right" data-x_margin="18" data-y_margin="18" data-svelte-h="svelte-bv2cpr"></script><!-- HEAD_svelte-n5ip0u_END -->
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=UA-86124920-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'UA-86124920-1');
		</script>
		<script src="https://www.penguinsight.com/thumbs.js" type="module"></script>
	</head>
	<body data-sveltekit-preload-data="hover" class="bg-base-100">
		<div style="display: contents">  <div class="toaster  svelte-jyff3d"> </div> <div class="navbar bg-base-100"><div class="navbar-start"><div class="dropdown"><button tabindex="0" class="btn-ghost btn sm:hidden" data-svelte-h="svelte-1h8jdop"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg></button> <ul tabindex="0" class="dropdown-content menu rounded-box menu-sm mt-3 w-52 bg-base-100 p-2 shadow"><li><a href="/">Home</a></li><li><a href="/notes">Notes</a></li></ul></div> <a class="btn-ghost btn text-xl normal-case" href="/">Allan Deutsch</a></div> <div class="navbar-center hidden sm:flex"><ul class="menu menu-horizontal px-1 text-base"><li><a href="/">Home</a></li><li><a href="/notes">Notes</a></li></ul></div> <div class="navbar-end"> <div class="h-8" data-svelte-h="svelte-b95tle"><a href="https://twitter.com/AllanDeutsch" class="group"><svg height="24" width="24" class="mr-1.5 inline transition-colors duration-300 group-hover:fill-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612"><path d="M612 116.258a250.714 250.714 0 01-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 01-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg></a> <a href="https://github.com/masstronaut" class="group"><svg height="24" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="mr-1.5 inline transition-colors duration-300 group-hover:fill-primary"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></div> </div></div> <div class="p-1 sm:p-4"> <article class="note-container prose mb-8 max-w-full svelte-564mcj"><header class="w-full max-w-3xl self-center"><h1 class="mb-8 text-left text-4xl font-bold">Structural types increase data compatibility</h1> <div class="text-md mb-12 mt-4 flex justify-between border-t border-t-neutral border-opacity-20 pt-1 text-base-content"><div><span class="pr-2" data-svelte-h="svelte-114jejz">🌱</span><span class="hidden sm:inline" data-svelte-h="svelte-1psjisz">Planted
				</span>February 4, 2024.
				</div> <div class="flex flex-col items-end"><div class="note__status seedling svelte-564mcj">seedling 🌱</div> <div>1 minute read ⏱</div></div></div></header>  <p data-svelte-h="svelte-2kmkxw">Typescript uses an approach to types called “structural typing”. Structural types are compatible if they share the same structure: the same named members and those members have the same types. This differs from languages such as C &amp; C++ which use an approach called “nominal typing.” Nominal types are only equivalent if they share the same structure <strong>and name</strong>. Here’s a quick reference:</p> <div class="table-container col-start-1 col-end-4 w-full overflow-x-scroll svelte-ct1coh"><table><thead data-svelte-h="svelte-rsxkvl"><tr><th></th> <th>Nominal</th> <th>Structural</th></tr></thead> <tbody data-svelte-h="svelte-1m6m8v6"><tr><td>Languages</td> <td>C, C++, Java, C#</td> <td>TypeScript, Go</td></tr> <tr><td>Type compatibility requirements</td> <td>Structure and name</td> <td>Structure</td></tr> <tr><td>Specificity</td> <td>Strict</td> <td>Flexible</td></tr></tbody></table> </div> <p data-svelte-h="svelte-44hwdv">I find it easiest to understand how structural types work with code examples:</p> <!-- HTML_TAG_START --><pre class="shiki" style="background-color: #ffffff; color: #24292f" ts="true"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #CF222E">type</span><span style="color: #24292F"> </span><span style="color: #953800">A</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> &#123; </span><span style="color: #953800">a</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #0550AE">number</span><span style="color: #24292F"> &#125;;</span></div><div class='line'><span style="color: #CF222E">type</span><span style="color: #24292F"> </span><span style="color: #953800">B</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> &#123; </span><span style="color: #953800">a</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #0550AE">number</span><span style="color: #24292F">, </span><span style="color: #953800">b</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #0550AE">string</span><span style="color: #24292F"> &#125;;</span></div><div class='line'></div><div class='line'><span style="color: #6E7781">// &#96;a1&#96; is explicitly typed as an &#96;A&#96; object</span></div><div class='line'><span style="color: #CF222E">let</span><span style="color: #24292F"> a1</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">A</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> &#123; a: </span><span style="color: #0550AE">123</span><span style="color: #24292F"> &#125;;</span></div><div class='line'><span style="color: #6E7781">// &#96;a2&#96; is not explicitly typed as &#96;A&#96;...</span></div><div class='line'><span style="color: #CF222E">let</span><span style="color: #24292F"> a2 </span><span style="color: #CF222E">=</span><span style="color: #24292F"> &#123; a: </span><span style="color: #0550AE">321</span><span style="color: #24292F"> &#125;;</span></div><div class='line'><span style="color: #6E7781">// But its structure matches,</span></div><div class='line'><span style="color: #6E7781">// so it can be assigned to a type &#96;A&#96; object</span></div><div class='line'><span style="color: #24292F">a1 </span><span style="color: #CF222E">=</span><span style="color: #24292F"> a2; </span><span style="color: #6E7781">// Valid</span></div><div class='line'></div><div class='line'><span style="color: #6E7781">// &#96;b&#96; is explicitly typed as a &#96;B&#96; object</span></div><div class='line'><span style="color: #CF222E">let</span><span style="color: #24292F"> b</span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800">B</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> &#123;a: </span><span style="color: #0550AE">135</span><span style="color: #24292F">, b: </span><span style="color: #0A3069">"abc"</span><span style="color: #24292F">&#125;;</span></div><div class='line'><span style="color: #6E7781">// &#96;b&#96; can be assigned to an &#96;A&#96; object </span></div><div class='line'><span style="color: #6E7781">// because it is a superset of the structure of A</span></div><div class='line'><span style="color: #24292F">a2 </span><span style="color: #CF222E">=</span><span style="color: #24292F"> b; </span><span style="color: #6E7781">// Valid</span></div></code></div></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1lw6j2q">This approach is really convenient on the web where it’s common for data to come from external APIs; they may change the data provided. Structural typing makes it easy to handle extra data. In the <code>a2 = b</code> example above, the extra data on <code>b</code> is “sliced” off, narrowing it to an <code>A</code> object. The extra field on <code>B</code> doesn’t cause any issues! This makes it easy to opt-in to using additional data on a type when I’m ready, and to continue working until then.</p> <p data-svelte-h="svelte-rhottr">TypeScript type compatibility can <em>reduce clarity</em> that a developer could otherwise provide using a named type. This might be an issue when trying to distinguish between <em>structurally</em> equivalent types that are <em>nominally</em> different. As an example, consider a <code>UserID</code> and <code>PostID</code> that are both represented as strings:</p> <!-- HTML_TAG_START --><pre class="shiki twoslash lsp" style="background-color: #ffffff; color: #24292f" ts="true"><div class="language-id">ts</div><div class='code-container'><code><div class='line dim'><span style="color: #CF222E">type</span><span style="color: #24292F"> </span><span style="color: #953800"><data-lsp lsp='type UserID = string' >UserID</data-lsp></span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">string</span><span style="color: #24292F">;</span></div><div class='line dim'><span style="color: #CF222E">type</span><span style="color: #24292F"> </span><span style="color: #953800"><data-lsp lsp='type PostID = string' >PostID</data-lsp></span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">string</span><span style="color: #24292F">;</span></div><div class='line dim'>&nbsp;</div><div class='line dim'><span style="color: #CF222E">let</span><span style="color: #24292F"> <data-lsp lsp='let user: string' >user</data-lsp></span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800"><data-lsp lsp='type UserID = string' >UserID</data-lsp></span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0A3069">"allan"</span><span style="color: #24292F">;</span></div><div class='line highlight'><span style="color: #CF222E">let</span><span style="color: #24292F"> <data-lsp lsp='let post: string' >post</data-lsp></span><span style="color: #CF222E">:</span><span style="color: #24292F"> </span><span style="color: #953800"><data-lsp lsp='type PostID = string' >PostID</data-lsp></span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> <data-lsp lsp='let user: string' >user</data-lsp>;</span></div></code></div></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-5ewpk0">These are two different <em>named</em> types but because they are <em>structurally</em> identical TypeScript will allow you to assign a <code>UserID</code> value to a <code>PostID</code> object. Yikes! Compatibility makes problems like this possible.</p> <p data-svelte-h="svelte-1yxotue">Fortunately, it can be solved in TypeScript. <a href="/notes/Type%20branding%20removes%20structural%20type%20compatibility/">Type branding removes structural type compatibility</a>, and can be used to prevent this type of problem.</p> <div class="divider"></div> <aside class="prose"><h2 class="prose-h2:text-lg" data-svelte-h="svelte-128y7pj">Feedback</h2> <p data-svelte-h="svelte-171xzz7">Thanks for reading this, I hope it has helped you in some way. I&#39;d love it
			if you would share your feedback with my by using one of the buttons
			below. It only takes a second, and whether you love it or hate it, the
			feedback helps me write better content in the future!</p> <pi-thumb user="(anonymous)" path="notes/structural-types-increase-compatibility" team="d6101342-650f-443e-893a-0bcb31bd8da9"></pi-thumb> <p data-svelte-h="svelte-s9yh0w">If you&#39;re feeling extra generous, you can show your support by buying me a
			coffee with the button in the bottom right corner of the page.</p> <div class="divider"></div></aside></article>     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous"></div>  
			
			<script>
				{
					__sveltekit_6cs4bc = {
						base: new URL("../..", location).pathname.slice(0, -1),
						env: {"PUBLIC_SUPABASE_ANON_KEY":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFlb3ZmZXRyaXNyZnFpZWF0bXp3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODcwNjM0NTYsImV4cCI6MjAwMjYzOTQ1Nn0.s9KXOQ0gDdl7e3lTUxdN5yfPI0rLZ-dSRMfEwoHhK00","PUBLIC_SUPABASE_URL":"https://aeovfetrisrfqieatmzw.supabase.co"}
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":{session:null,user:null},"uses":{}},null];

					Promise.all([
						import("../../_app/immutable/entry/start.835672ac.js"),
						import("../../_app/immutable/entry/app.56a1ee55.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 13],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>

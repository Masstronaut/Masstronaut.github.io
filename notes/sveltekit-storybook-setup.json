{"status":"seedling","statusIcon":"ðŸŒ±","title":"Setting up a SvelteKit project with Storybook","description":"Setting up Storybook on a SvelteKit project doesn't work out of the box using the config tool. This guide walks you through a few extra steps needed to get SvelteKit and Storybook running.","slug":"sveltekit-storybook-setup","publish":true,"lastmod":"2022-04-19T00:00:00.000Z","date":"2022-04-19T00:00:00.000Z","aliases":["Set up SvelteKit with Storybook","Sveltekit Storybook setup"],"tags":["status/seedling","topic/webdev","taxonomy/reference"],"timeToRead":2,"internalLinks":[],"flashcards":[],"html":"<p>This will walk you through the steps to set up a new <em>SvelteKit</em> project with <em>StorybookJS</em>. It will also configure Storybook to use <em>ViteJS</em>. Using Vite gets the local storybook server up and running around ~50x faster.</p>\n<p>Initialize a <em>SvelteKit</em> project:</p>\n<pre class=\"language-bash\"><!-- HTML_TAG_START --><code class=\"language-bash\"><span class=\"token function\">npm</span> init svelte@next my-sveltekit-app</code><!-- HTML_TAG_END --></pre>\n<p>Confirm that it can install <code>create-svelte@next</code> then continue to the SvelteKit config options. My preferred config is as follows:</p>\n<table><thead><tr><th>Option</th>\n<th>Selection</th></tr></thead>\n<tbody><tr><td>Which Svelte app template?</td>\n<td>Skeleton project</td></tr>\n<tr><td>Add type checking?</td>\n<td>TypeScript</td></tr>\n<tr><td>Add ESLint for code linting?</td>\n<td>Yes</td></tr>\n<tr><td>Add Prettier for code formatting?</td>\n<td>Yes</td></tr>\n<tr><td>Add Playwright for browser testing?</td>\n<td>No</td></tr></tbody></table>\n<p>With <em>SvelteKit</em> configured, we can start setting up <em>StorybookJS</em>:</p>\n<pre class=\"language-bash\"><!-- HTML_TAG_START --><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> my-sveltekit-app\nnpx sb init</code><!-- HTML_TAG_END --></pre>\n<p>The automated <em>StorybookJS</em> configuration tool will run and set things up for a Svelte project. Itâ€™ll ask you if you want to set up the storybook linter plugin:</p>\n<table><thead><tr><th>Option</th>\n<th>Selection</th></tr></thead>\n<tbody><tr><td>Do you want to run the â€˜eslintPluginâ€™ fix on your project?</td>\n<td>Yes</td></tr></tbody></table>\n<p>Once the setup is done, there are a few manual config steps we need to go through. These will set up Storybook to use <em>ViteJS</em> which isnâ€™t yet supported out of the box (as of April 2022). Start by installing the Storybook Vite builder: </p>\n<pre class=\"language-bash\"><!-- HTML_TAG_START --><code class=\"language-bash\"><span class=\"token function\">npm</span> i -D @storybook/builder-vite</code><!-- HTML_TAG_END --></pre>\n<p>And configure <em>StorybookJS</em> to use <code>builder-vite</code> in the <code>.storybook/main.js</code> file. Youâ€™ll need to make two changes:</p>\n<ol><li>Add <code>&quot;builder&quot;: &quot;@storybook/builder-vite&quot;</code> to the <code>core</code> config</li>\n<li>Change the preprocess option:<ul><li>From <code>&quot;preprocess&quot;: require(&quot;../svelte.config.js&quot;).preprocess</code> to </li>\n<li><code>&quot;preprocess&quot;: import(&quot;../svelte.config.js&quot;).preprocess</code></li></ul></li></ol>\n<p>Afterwards the <code>.storybook/main.js</code> file should look like this:</p>\n<pre class=\"language-js\"><!-- HTML_TAG_START --><code class=\"language-js\"><span class=\"token comment\">// .storybook/main.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token string-property property\">\"core\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string-property property\">\"builder\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"@storybook/builder-vite\"</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"stories\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"../src/**/*.stories.mdx\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"../src/**/*.stories.@(js|jsx|ts|tsx|svelte)\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"addons\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"@storybook/addon-links\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"@storybook/addon-essentials\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"@storybook/addon-svelte-csf\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"framework\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"@storybook/svelte\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"svelteOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string-property property\">\"preprocess\"</span><span class=\"token operator\">:</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"../svelte.config.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>preprocess\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code><!-- HTML_TAG_END --></pre>\n<p>Finally we need to tell Storybook to use <em>CommonJS</em>. Create the file <code>.storybook/package.json</code> and add the following to it:</p>\n<pre class=\"language-json\"><!-- HTML_TAG_START --><code class=\"language-json\"><span class=\"token comment\">// .storybook/package.json</span>\n<span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"commonjs\"</span>\n<span class=\"token punctuation\">&#125;</span></code><!-- HTML_TAG_END --></pre>\n<p>Voila! You should be all set. Running <code>npm run dev</code> and navigating to <code>localhost:3000</code> in your browser should show a basic sveltekit skeleton page:</p>\n<p>To get <em>StorybookJS</em> up, run <code>npm run storybook</code> and navigate to <code>localhost:6006</code> in your browser. You should see the welcome page and a few example component stories:</p>\n<p>And check out how fast the storybook server launched! ðŸ¤¯</p>\n<p>Just for comparison, hereâ€™s how long it took without using <em>ViteJS</em>:</p>","css":{"code":"","map":null},"head":"","href":"/notes/sveltekit-storybook-setup","component":{}}
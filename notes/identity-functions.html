<!doctype html>
<html lang="en" class="min-h-full">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../_app/immutable/assets/0.CdyhV9_Z.css" rel="stylesheet">
		<link href="../_app/immutable/assets/NoteGridStatusFilter.eq4K4R-6.css" rel="stylesheet">
		<link href="../_app/immutable/assets/MDSveXNoteLayout.fO7cJVK6.css" rel="stylesheet">
		<link href="../_app/immutable/assets/3.Dup2Frd_.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.U0nWvP-j.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/entry.u7uvJ29-.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/scheduler.ewBkyc9q.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.BLG_sda7.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper.C1FmrZbK.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.DpmaPz1F.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.mV4gPFDu.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/each.DRjyAD6E.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/NoteGridStatusFilter.svelte_svelte_type_style_lang.C9E0_fqv.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/3.znbmnP3_.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/stores.SlQySgry.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/NoteGrid.CRkkVRwu.js"><title>Identity functions - Allan Deutsch</title><!-- HEAD_svelte-x3qw35_START --><meta name="description" content="Identity functions make it possible to provide a much better developer experience at API boundaries by improving the type"><meta property="og:title" content="Identity functions"><meta property="og:type" content="article"><meta property="og:url" content="https://allandeutsch.com/notes/identity-functions"><meta property="og:description" content="Identity functions make it possible to provide a much better developer experience at API boundaries by improving the type"><meta property="og:locale" content="en_US"><meta property="twitter:card" content="summary"><meta property="twitter:url" content="https://allandeutsch.com"><meta property="twitter:title" content="Identity functions"><meta property="twitter:description" content="Identity functions make it possible to provide a much better developer experience at API boundaries by improving the type"><meta property="twitter:site" content="@AllanDeutsch"><meta property="twitter:creator" content="@AllanDeutsch"><link rel="canonical" href="https://allandeutsch.com/notes/identity-functions"><script type="module" src="https://docduck.dev/selection.js" data-svelte-h="svelte-1qfon0b"></script><script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="AllanDeutsch" data-description="Support me on Buy me a coffee!" data-message="" data-color="#5F7FFF" data-position="Right" data-x_margin="18" data-y_margin="18" data-svelte-h="svelte-bv2cpr"></script><!-- HEAD_svelte-x3qw35_END --><!-- HEAD_svelte-cpyj77_START -->   <meta name="theme-color" content="dark"><!-- HTML_TAG_START --><script nonce="%sveltekit.nonce%">(function setInitialMode(defaultMode, themeColors2) {
  const rootEl = document.documentElement;
  const mode = localStorage.getItem("mode-watcher-mode") || defaultMode;
  const light = mode === "light" || mode === "system" && window.matchMedia("(prefers-color-scheme: light)").matches;
  rootEl.classList[light ? "remove" : "add"]("dark");
  rootEl.style.colorScheme = light ? "light" : "dark";
  if (themeColors2) {
    const themeMetaEl = document.querySelector('meta[name="theme-color"]');
    if (themeMetaEl) {
      themeMetaEl.setAttribute("content", mode === "light" ? themeColors2.light : themeColors2.dark);
    }
  }
  localStorage.setItem("mode-watcher-mode", mode);
})("system", {"dark":"dark","light":"light"});</script><!-- HTML_TAG_END --><!-- HEAD_svelte-cpyj77_END -->
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=UA-86124920-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'UA-86124920-1');
		</script>
	</head>
	<body
		data-sveltekit-preload-data="hover"
		data-sveltekit-preload-data="viewport"
		class="h-full min-h-[100vh] bg-base-100">
		<div style="display: contents">  <div class="h-full min-h-[100dvh]"><div class="toaster  svelte-jyff3d" role="alert"> </div> <div class="navbar bg-base-100 print:hidden"><div class="navbar-start"><div class="dropdown"><button tabindex="0" class="btn btn-ghost sm:hidden" data-svelte-h="svelte-o7egld"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg></button>  <ul tabindex="0" class="dropdown-content menu rounded-box menu-sm mt-3 w-52 bg-base-100 p-2 shadow"><li><a href="/">Home</a></li><li><a href="/notes">Notes</a></li><li><a href="/devlog">Devlog</a></li></ul></div> <a class="btn btn-ghost text-xl normal-case" href="/">Allan Deutsch</a></div> <div class="navbar-center hidden sm:flex"><ul class="menu menu-horizontal px-1 text-base"><li><a href="/">Home</a></li><li><a href="/notes">Notes</a></li><li><a href="/devlog">Devlog</a></li></ul></div> <div class="navbar-end"> <div class="h-8" data-svelte-h="svelte-1hosge2"><a href="https://twitter.com/AllanDeutsch" class="group"><svg height="24" width="24" class="mr-1.5 inline fill-base-content transition-colors duration-300 group-hover:fill-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612"><path d="M612 116.258a250.714 250.714 0 01-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 01-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg></a> <a href="https://github.com/masstronaut" class="group"><svg height="24" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="mr-1.5 inline fill-base-content transition-colors duration-300 group-hover:fill-primary"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></div> </div></div> <div class="h-full p-1 sm:p-4"> <docduck-feedback team="TKxfdiO22xOXIrW0c0Pfi"></docduck-feedback> <div class="grid w-full grid-cols-[1fr_min(65ch,100%)_1fr]"><h1 class="col-start-2 col-end-3 text-left text-4xl font-bold" style="view-transition-name: title">Identity functions</h1></div> <article class="note-container prose mb-8 max-w-full px-2 svelte-1kfhx26" style="view-transition-name: article;"><header class="w-full max-w-3xl self-center"><div class="text-md mb-12 mt-4 flex justify-between border-t border-t-neutral border-opacity-20 pt-1 text-base-content"><div><span class="pr-2" data-svelte-h="svelte-114jejz">üå±</span><span class="hidden sm:inline" data-svelte-h="svelte-1psjisz">Planted
				</span>May 18, 2024.
				<br>Last tended May 19, 2024.</div> <div class="flex flex-col items-end"><div class="note__status seedling svelte-1kfhx26">seedling üå±</div>  <div>5 minutes read ‚è±</div></div></div></header>  <p data-svelte-h="svelte-29oivh">Identity functions are a tool to improve type information. They take the form of a function that provides TypeScript with extra type information and typically have a return value that is identical to argument passed to them. Typically identity functions are used to either provide a library‚Äôs users with better type information, or for a library to get better type information from a user. In both cases, the goal seems to be improving ease of use and developer experience.</p> <h2 id="providing-type-hints-to-api-consumers" data-svelte-h="svelte-1dec0jz"><a aria-hidden="true" tabindex="-1" href="#providing-type-hints-to-api-consumers"><span class="icon icon-link"></span></a><a href="#providing-type-hints-to-api-consumers" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Providing type hints to API consumers</h2> <p data-svelte-h="svelte-2rbqje">Libraries with many configuration options commonly use an identity function to make it easier for users to configure them. This is typically done by exporting a function with a name like <code>defineConfig()</code>. It will take a parameter typed identically to the library‚Äôs configuration object. Since this tells the IDE what values exist on the object, it can display those options to the users. I much prefer this in-editor experience to tabbing back and forth between my code and the docs. Some tools I use that take this approach are:</p> <ul data-svelte-h="svelte-1slv5it"><li><a href="https://typescript-eslint.io/packages/typescript-eslint#config" rel="nofollow">typescript-eslint</a></li> <li><a href="https://vitejs.dev/config/#config-intellisense" rel="nofollow">vite‚Äôs defineConfig</a></li></ul> <p data-svelte-h="svelte-cnxy17">For example, compare the intellisense help with and without Vite‚Äôs <code>defineConfig()</code>:</p> <!-- HTML_TAG_START --><pre class="shiki shiki-themes vitesse-light vitesse-dark twoslash lsp" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash filename="vite.config.ts" data-tsplay="https://typescriptlang.org/play/#code/JYWwDg9gTgLgBAbzgEwKYDNgDtUGEJaYDmcAvnOlBCHAOQBuwMqtAUOwPQdwACANhCIAuOADkIcbMz59gAZ1RYFAbjgAVAJ5hUAZQDGUYGHjIIqOVlrwA1lggB3ODAAW8yXLgBDOI2Zw9BMRwEABGAFaoejAAdOwBSvDxxACMcAC8iHAhngoitBy0ZMqc3PyCImiYOPiEwES0HmCeUJ4gqMxQ7k5aqMjRcABCqM4QfMgi9J6yyP6BdcHGwARyAIQlvHYAolBUUHKs8XKJc0QATOkoGNh4JwAUSNm5dAVkAJTFXHBf3z+-f-9fAB6AB92KwgA"><code><span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#B07D48;--shiki-dark:#BD976A"> </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#59873A;--shiki-dark:#80A665"> defineConfig</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A">config</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">UserConfig</span><span style="color:#999999;--shiki-dark:#666666">):</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> UserConfig</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE">+</span><span style="color:#2F798A;--shiki-dark:#4C9A91">3</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> overloads</span><span style="color:#999999;--shiki-dark:#666666">)</span></code><div class="twoslash-popup-docs">Type helper to make it easier to use vite.config.ts
accepts a direct 
&#123;@link 
UserConfig
&#125;
 object, or a function that returns it.
The function receives a 
&#123;@link 
ConfigEnv
&#125;
 object.</div></span>defineConfig</span></span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">vite</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span><div class="twoslash-tag-line twoslash-tag-log-line"><span class="twoslash-tag-icon tag-log-icon"><svg viewBox="0 0 32 32"><path fill="currentColor" d="M17 22v-8h-4v2h2v6h-3v2h8v-2zM16 8a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 16 8"></path><path fill="currentColor" d="M26 28H6a2.002 2.002 0 0 1-2-2V6a2.002 2.002 0 0 1 2-2h20a2.002 2.002 0 0 1 2 2v20a2.002 2.002 0 0 1-2 2M6 6v20h20V6Z"></path></svg></span>No intellisense; TypeScript doesn't know this is a vite config object.</div><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash filename="vite.config.ts"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A">config1</span><span style="color:#999999;--shiki-dark:#666666">: &#123;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">    base</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span></code></pre></code></span>config1</span></span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#999999;--shiki-dark:#666666"> &#123; </span><span style="color:#998418;--shiki-dark:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">base</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> string</span></code></span>base</span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">/</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666"> &#125;;</span></span>
<span class="line"></span>
<span class="line"></span><div class="twoslash-tag-line twoslash-tag-log-line"><span class="twoslash-tag-icon tag-log-icon"><svg viewBox="0 0 32 32"><path fill="currentColor" d="M17 22v-8h-4v2h2v6h-3v2h8v-2zM16 8a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 16 8"></path><path fill="currentColor" d="M26 28H6a2.002 2.002 0 0 1-2-2V6a2.002 2.002 0 0 1 2-2h20a2.002 2.002 0 0 1 2 2v20a2.002 2.002 0 0 1-2 2M6 6v20h20V6Z"></path></svg></span>defineConfig's parameter is typed. Behold: valid config options!</div><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A">config2</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">UserConfig</span></code></span>config2</span></span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#59873A;--shiki-dark:#80A665"> </span><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#59873A;--shiki-dark:#80A665"> defineConfig</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A">config</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">UserConfig</span><span style="color:#999999;--shiki-dark:#666666">):</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> UserConfig</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE">+</span><span style="color:#2F798A;--shiki-dark:#4C9A91">3</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> overloads</span><span style="color:#999999;--shiki-dark:#666666">)</span></code><div class="twoslash-popup-docs">Type helper to make it easier to use vite.config.ts
accepts a direct 
&#123;@link 
UserConfig
&#125;
 object, or a function that returns it.
The function receives a 
&#123;@link 
ConfigEnv
&#125;
 object.</div></span>defineConfig</span></span><span style="color:#999999;--shiki-dark:#666666">(&#123; </span><span style="color:#998418;--shiki-dark:#B8A965"><span>b<span class="twoslash-completion-cursor"><ul class="twoslash-completion-list"><li><span class="twoslash-completions-icon completions-property"><svg viewBox="0 0 32 32"><path fill="currentColor" d="M12.1 2a9.8 9.8 0 0 0-5.4 1.6l6.4 6.4a2.1 2.1 0 0 1 .2 3a2.1 2.1 0 0 1-3-.2L3.7 6.4A9.84 9.84 0 0 0 2 12.1a10.14 10.14 0 0 0 10.1 10.1a10.9 10.9 0 0 0 2.6-.3l6.7 6.7a5 5 0 0 0 7.1-7.1l-6.7-6.7a10.9 10.9 0 0 0 .3-2.6A10 10 0 0 0 12.1 2m8 10.1a7.61 7.61 0 0 1-.3 2.1l-.3 1.1l.8.8l6.7 6.7a2.88 2.88 0 0 1 .9 2.1A2.72 2.72 0 0 1 27 27a2.9 2.9 0 0 1-4.2 0l-6.7-6.7l-.8-.8l-1.1.3a7.61 7.61 0 0 1-2.1.3a8.27 8.27 0 0 1-5.7-2.3A7.63 7.63 0 0 1 4 12.1a8.33 8.33 0 0 1 .3-2.2l4.4 4.4a4.14 4.14 0 0 0 5.9.2a4.14 4.14 0 0 0-.2-5.9L10 4.2a6.45 6.45 0 0 1 2-.3a8.27 8.27 0 0 1 5.7 2.3a8.49 8.49 0 0 1 2.4 5.9"></path></svg></span><span><span class="twoslash-completions-matched">b</span><span class="twoslash-completions-unmatched">ase</span></span></li><li><span class="twoslash-completions-icon completions-property"><svg viewBox="0 0 32 32"><path fill="currentColor" d="M12.1 2a9.8 9.8 0 0 0-5.4 1.6l6.4 6.4a2.1 2.1 0 0 1 .2 3a2.1 2.1 0 0 1-3-.2L3.7 6.4A9.84 9.84 0 0 0 2 12.1a10.14 10.14 0 0 0 10.1 10.1a10.9 10.9 0 0 0 2.6-.3l6.7 6.7a5 5 0 0 0 7.1-7.1l-6.7-6.7a10.9 10.9 0 0 0 .3-2.6A10 10 0 0 0 12.1 2m8 10.1a7.61 7.61 0 0 1-.3 2.1l-.3 1.1l.8.8l6.7 6.7a2.88 2.88 0 0 1 .9 2.1A2.72 2.72 0 0 1 27 27a2.9 2.9 0 0 1-4.2 0l-6.7-6.7l-.8-.8l-1.1.3a7.61 7.61 0 0 1-2.1.3a8.27 8.27 0 0 1-5.7-2.3A7.63 7.63 0 0 1 4 12.1a8.33 8.33 0 0 1 .3-2.2l4.4 4.4a4.14 4.14 0 0 0 5.9.2a4.14 4.14 0 0 0-.2-5.9L10 4.2a6.45 6.45 0 0 1 2-.3a8.27 8.27 0 0 1 5.7 2.3a8.49 8.49 0 0 1 2.4 5.9"></path></svg></span><span><span class="twoslash-completions-matched">b</span><span class="twoslash-completions-unmatched">uild</span></span></li></ul></span></span></span><span style="color:#998418;--shiki-dark:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#B07D48;--shiki-dark:#BD976A">UserConfig</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">base</span><span style="color:#AB5959;--shiki-dark:#CB7676">?:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> string</span><span style="color:#AB5959;--shiki-dark:#CB7676"> |</span><span style="color:#AB5959;--shiki-dark:#CB7676"> undefined</span></code><div class="twoslash-popup-docs">Base public path when served in development or production.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@default</span><span class="twoslash-popup-docs-tag-value">'/'</span></span></div></span>ase</span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">/</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666"> &#125;);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --><!-- HTML_TAG_START --><pre class="code-copy-target hidden">import &#123; defineConfig &#125; from 'vite'


// @log: No intellisense; TypeScript doesn't know this is a vite config object.

const config1 = &#123; base: '/' &#125;;

// @log: defineConfig's parameter is typed. Behold: valid config options!

// @noErrors
const config2 = defineConfig(&#123; base: '/' &#125;);
//                              ^|


</pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1v0k9tc">I hope the identity function approach rapidly gains popularity. The <em>developer experience</em> is excellent, and it uses simple syntax that is easy to understand. I find it much more intuitive than JSDoc type import annotations.</p> <h2 id="getting-narrower-type-information-from-api-consumers" data-svelte-h="svelte-muikiu"><a aria-hidden="true" tabindex="-1" href="#getting-narrower-type-information-from-api-consumers"><span class="icon icon-link"></span></a><a href="#getting-narrower-type-information-from-api-consumers" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Getting narrower type information from API consumers</h2> <p data-svelte-h="svelte-k6lrmt">Imagine you are building a basic router. It needs to know the path and handler for each route, and it takes an array of objects with these values. Trivially, that might look something like this:</p> <!-- HTML_TAG_START --><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" data-tsplay="https://typescriptlang.org/play/#code/C4TwDgpgBASg9gV2NAvFA3gKAJBgIbAAWAXFAM7ABOAlgHYDmA3DoXrQCYA2ElpAFADoheSvTKk2IANoBdAJQoAfFEmYAvpgBmCWgGNg1OLSgARCJroR4SCGT6VEycbEcRZcrNkoRgCSsYcbMmYNTCA"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">type</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> Route</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">	path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">	handler</span><span style="color:#999999;--shiki-dark:#666666">: (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[])=> </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#59873A;--shiki-dark:#80A665"> DefineRoutes</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">[])&#123;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">	return</span><span style="color:#B07D48;--shiki-dark:#BD976A"> routes</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --><!-- HTML_TAG_START --><pre class="code-copy-target hidden">type Route = &#123;
	path: string;
	handler: (...args: any[])=&gt; any
&#125;
function DefineRoutes(routes: Route[])&#123;
	return routes;
&#125;

</pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-fnoiew">This straightforward approach will produce a runtime array of values, but the type system doesn‚Äôt know the <em>exact</em> paths or <em>exact</em> parameters for each route. TypeScript only knows that paths are strings and handlers are functions. Hovering over the highlighted values below reveals that TypeScript knows only their broad types.</p> <!-- HTML_TAG_START --><pre class="shiki shiki-themes vitesse-light vitesse-dark twoslash lsp" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash data-tsplay="https://typescriptlang.org/play/#code/C4TwDgpgBASg9gV2NAvFA3gKAJBgIbAAWAXFAM7ABOAlgHYDmA3DoXrQCYA2ElpAFADoheSvTKk2IANoBdAJQoAfFEmYAvpgBmCWgGNg1OLSgARCJroR4SCGT6VEycbEcRZcrNkoRgCSsYcbMmYNAHpQqABaaN0kaMjMXSMKKECnKDQzC1orVzspLCgiqHwiUgByUMIITk44UIB3OEpOdnKAGihMcKKAPX7ezGKoVg5uXig+AFtbMjx6CFIKGgYFZRmyOYWBbgYiboioAeOh4rVOwuLSkihK+jg4dgAjEAhQqYfaDq6eo4HToqjLg8fhrdBhQ7Hf5qeSYIA"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">[]</span></code></span>routes</span></span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#59873A;--shiki-dark:#80A665"> </span><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#59873A;--shiki-dark:#80A665"> DefineRoutes</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">[]):</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> Route</span><span style="color:#999999;--shiki-dark:#666666">[]</span></code></span>DefineRoutes</span></span><span style="color:#999999;--shiki-dark:#666666">([&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">    </span><span class="twoslash-highlighted"><span style="color:#998418;--shiki-dark:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">path</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> string</span></code></span>path</span></span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">, </span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">    </span><span class="twoslash-highlighted"><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">handler</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[])</span><span style="color:#999999;--shiki-dark:#666666"> =></span><span style="color:#B07D48;--shiki-dark:#BD976A"> any</span></code></span>handler</span></span></span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">message</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> string</span></code></span>message</span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">)=> </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">message</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> string</span></code></span>message</span></span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#998418;--shiki-dark:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#B07D48;--shiki-dark:#BD976A">String</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#998418;--shiki-dark:#B8A965">length</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE">: </span><span style="color:#B07D48;--shiki-dark:#BD976A">number</span></code><div class="twoslash-popup-docs">Returns the length of a String object.</div></span>length</span></span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">    &#125;,</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">    </span><span class="twoslash-highlighted"><span style="color:#998418;--shiki-dark:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">path</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> string</span></code></span>path</span></span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">, </span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">    </span><span class="twoslash-highlighted"><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">handler</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[])</span><span style="color:#999999;--shiki-dark:#666666"> =></span><span style="color:#B07D48;--shiki-dark:#BD976A"> any</span></code></span>handler</span></span></span><span style="color:#999999;--shiki-dark:#666666">: ()=>&#123;&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;])</span></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --><!-- HTML_TAG_START --><pre class="code-copy-target hidden">type Route = &#123;
	path: string;
	handler: (...args: any[])=&gt; any
&#125;
function DefineRoutes(routes: Route[])&#123;
	return routes;
&#125;
// ---cut---
const routes = DefineRoutes([&#123;
    path: '/hello/world', 
//  ^^^^
    handler: (message: string)=&gt; message.length
//  ^^^^^^^
    &#125;, &#123;
    path: '/goodbye/moon', 
//  ^^^^
    handler: ()=&gt;&#123;&#125;
//  ^^^^^^^
&#125;])
</pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-h40ul5">Now let‚Äôs build a version of this API where the type system has extremely narrow types for each value. That can provide many benefits that are impossible otherwise:</p> <ul data-svelte-h="svelte-gyv5x6"><li>A type safe API that only allows calls to a route that match the route handler‚Äôs signature</li> <li>When specifying a route, instead of any string being allowed it could be limited to only <em>defined</em> routes, which would all pop up as suggestions in the intellisense</li></ul> <p data-svelte-h="svelte-1lm0xw6"><code>Router</code> will need to be a generic so the type system can infer narrower types. Specifically, it needs to narrow in three ways:</p> <ol data-svelte-h="svelte-e9hn07"><li>The <code>Route.path</code> values must be narrowed to <a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#literal-types" rel="nofollow">string literals</a></li> <li>The <code>Route.handler</code> values must be narrowly typed as their exact function signature</li> <li>Both 1&amp;2 need to happen separately for each value in the array</li></ol> <p data-svelte-h="svelte-1nh4jc2">To do this requires a <a href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-0/#const-type-parameters" rel="nofollow"><code>const</code> type parameter</a> (introduced in TypeScript 5.0) and until TS 5.3 it requires using a <code>ReadonlyArray</code> as well. This should do it:</p> <!-- HTML_TAG_START --><pre class="shiki shiki-themes vitesse-light vitesse-dark twoslash lsp" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash data-tsplay="https://typescriptlang.org/play/#code/C4TwDgpgBASg9gV2NAvFA3gKAJBgIbAAWAXFAM7ABOAlgHYDmA3DoXrQCYA2ElpAFADoheSvTKk2IANoBdAJQoAfFEmYAvpgBmCWgGNg1OLSgARCJroR4SCGQA8uoxSgAVa8jJQIAD2QdPMBB47EacIACClJR4IHbuEIqKfJSIHqRuqbZyWAD0OVAFhUXFxQB65eUlVUUVtXX15TiUEMAIlMYpNmTMGphAA"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">type</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> </span><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">type</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> Route</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">    path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">    handler</span><span style="color:#999999;--shiki-dark:#666666">: (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[]) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span></code></pre></code></span>Route</span></span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">	</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">path</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> string</span></code></span>path</span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">	</span><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">handler</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[])</span><span style="color:#999999;--shiki-dark:#666666"> =></span><span style="color:#B07D48;--shiki-dark:#BD976A"> any</span></code></span>handler</span></span><span style="color:#999999;--shiki-dark:#666666">: (...</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">args</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> any</span><span style="color:#999999;--shiki-dark:#666666">[]</span></code></span>args</span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[])=> </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#59873A;--shiki-dark:#80A665"> </span><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#59873A;--shiki-dark:#80A665"> DefineRoutes</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#AB5959;--shiki-dark:#CB7676">const</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> TRoutes</span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">>>(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#999999;--shiki-dark:#666666">):</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> TRoutes</span></code></span>DefineRoutes</span></span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span class="twoslash-highlighted"><span style="color:#AB5959;--shiki-dark:#CB7676">const</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> </span><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">type</span><span style="color:#B07D48;--shiki-dark:#BD976A"> parameter</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#59873A;--shiki-dark:#80A665"> TRoutes</span><span style="color:#59873A;--shiki-dark:#80A665"> in</span><span style="color:#59873A;--shiki-dark:#80A665"> DefineRoutes</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#AB5959;--shiki-dark:#CB7676">const</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> TRoutes</span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">>>(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#999999;--shiki-dark:#666666">):</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> TRoutes</span></code></span>TRoutes</span></span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> </span><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">interface</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">T</span><span style="color:#999999;--shiki-dark:#666666">></span></code></span>ReadonlyArray</span></span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">type</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> Route</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">    path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">    handler</span><span style="color:#999999;--shiki-dark:#666666">: (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[]) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span></code></pre></code></span>Route</span></span><span style="color:#999999;--shiki-dark:#666666">></span></span><span style="color:#999999;--shiki-dark:#666666">>(</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">routes</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#AB5959;--shiki-dark:#CB7676"> const </span><span style="color:#B07D48;--shiki-dark:#BD976A">TRoutes</span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends ReadonlyArray&#x3C;Route></span></code></span>routes</span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">type</span><span style="color:#B07D48;--shiki-dark:#BD976A"> parameter</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#59873A;--shiki-dark:#80A665"> TRoutes</span><span style="color:#59873A;--shiki-dark:#80A665"> in</span><span style="color:#59873A;--shiki-dark:#80A665"> DefineRoutes</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#AB5959;--shiki-dark:#CB7676">const</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> TRoutes</span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">>>(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#999999;--shiki-dark:#666666">):</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> TRoutes</span></code></span>TRoutes</span></span><span style="color:#999999;--shiki-dark:#666666">)&#123;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">	return</span><span style="color:#B07D48;--shiki-dark:#BD976A"> </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">routes</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#AB5959;--shiki-dark:#CB7676"> const </span><span style="color:#B07D48;--shiki-dark:#BD976A">TRoutes</span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends ReadonlyArray&#x3C;Route></span></code></span>routes</span></span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --><!-- HTML_TAG_START --><pre class="code-copy-target hidden">type Route = &#123;
	path: string;
	handler: (...args: any[])=&gt; any
&#125;
function DefineRoutes&lt;const TRoutes extends ReadonlyArray&lt;Route&gt;&gt;(routes: TRoutes)&#123;
//                    ^^^^^                 ^^^^^^^^^^^^^^^^^^^^
	return routes;
&#125;

</pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1qe73x9">The <code>const</code> type parameter tells TypeScript to infer the narrowest type possible. It does a great job at it, too. Check them out for the same call to <code>Router</code> as above, but using the new typing for it:</p> <!-- HTML_TAG_START --><pre class="shiki shiki-themes vitesse-light vitesse-dark twoslash lsp" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash data-tsplay="https://typescriptlang.org/play/#code/C4TwDgpgBASg9gV2NAvFA3gKAJBgIbAAWAXFAM7ABOAlgHYDmA3DoXrQCYA2ElpAFADoheSvTKk2IANoBdAJQoAfFEmYAvpgBmCWgGNg1OLSgARCJroR4SCGQA8uoxSgAVa8jJQIAD2QdPMBB47EacIACClJR4IHbuEIqKfJSIHqRuqbZyWNiUEMAIlMYpNmTMGgD0FVAAtHW6SHU1mI60ziUeUGhmFrRWmWR8UlhQo1D4RKQA5BWEEJyccBUA7nCUnOxTADRQmFWjAHpHB5hjUKwc3LxQfAC2tmR49BCkFDQMCsr3ZI-PAtwMIh7apQY5g05jNQ7EZjCYkKAzehwODsABGIAgFVuyNo212+1BxwhowuXB4-E+6EqILBRLU8kwjMZQA"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#AB5959;--shiki-dark:#CB7676">readonly</span><span style="color:#999999;--shiki-dark:#666666"> [&#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A">message</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;, &#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: () => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">void</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;]</span></span></code></pre></code></span>routes</span></span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#59873A;--shiki-dark:#80A665"> </span><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#59873A;--shiki-dark:#80A665"> DefineRoutes</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#AB5959;--shiki-dark:#CB7676">readonly</span><span style="color:#999999;--shiki-dark:#666666"> [&#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A">message</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;,</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: () => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">void</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;]>(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#AB5959;--shiki-dark:#CB7676">readonly</span><span style="color:#999999;--shiki-dark:#666666"> [&#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A">message</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;, &#123;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">    ...;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;]):</span><span style="color:#AB5959;--shiki-dark:#CB7676"> readonly</span><span style="color:#999999;--shiki-dark:#666666"> [...]</span></span></code></pre></code></span>DefineRoutes</span></span><span style="color:#999999;--shiki-dark:#666666">([&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">    </span><span class="twoslash-highlighted"><span style="color:#998418;--shiki-dark:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">path</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span></code></span>path</span></span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">, </span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">    </span><span class="twoslash-highlighted"><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">handler</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">message</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#999999;--shiki-dark:#666666"> =></span><span style="color:#B07D48;--shiki-dark:#BD976A"> number</span></code></span>handler</span></span></span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">message</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> string</span></code></span>message</span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">)=> </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">message</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> string</span></code></span>message</span></span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#998418;--shiki-dark:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#B07D48;--shiki-dark:#BD976A">String</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#998418;--shiki-dark:#B8A965">length</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE">: </span><span style="color:#B07D48;--shiki-dark:#BD976A">number</span></code><div class="twoslash-popup-docs">Returns the length of a String object.</div></span>length</span></span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">    &#125;,</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">    </span><span class="twoslash-highlighted"><span style="color:#998418;--shiki-dark:#B8A965"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">path</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span></code></span>path</span></span></span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">, </span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">    </span><span class="twoslash-highlighted"><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">handler</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> ()</span><span style="color:#999999;--shiki-dark:#666666"> =></span><span style="color:#AB5959;--shiki-dark:#CB7676"> void</span></code></span>handler</span></span></span><span style="color:#999999;--shiki-dark:#666666">: ()=>&#123;&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;])</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --><!-- HTML_TAG_START --><pre class="code-copy-target hidden">type Route = &#123;
	path: string;
	handler: (...args: any[])=&gt; any
&#125;
function DefineRoutes&lt;const TRoutes extends ReadonlyArray&lt;Route&gt;&gt;(routes: TRoutes)&#123;
	return routes;
&#125;
// ---cut---
const routes = DefineRoutes([&#123;
    path: '/hello/world', 
//  ^^^^
    handler: (message: string)=&gt; message.length
//  ^^^^^^^
    &#125;, &#123;
    path: '/goodbye/moon', 
//  ^^^^
    handler: ()=&gt;&#123;&#125;
//  ^^^^^^^
&#125;])




</pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-t44mj3">Notice that both the <code>path</code> and <code>handler</code> values are getting typed as narrowly as possible. That makes it possible to do all sorts of cool things with them:</p> <!-- HTML_TAG_START --><pre class="shiki shiki-themes vitesse-light vitesse-dark twoslash lsp" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash data-tsplay="https://typescriptlang.org/play/#code/C4TwDgpgBASg9gV2NAvFA3gKAJBgIbAAWAXFAM7ABOAlgHYDmA3DoXrQCYA2ElpAFADoheSvTKk2IANoBdAJQoAfFEmYAvpgBmCWgGNg1OLSgARCJroR4SCGQA8uoxSgAVa8jJQIAD2QdPMBB47EacIACClJR4IHbuEIqKfJSIHqRuqbZyWNiUEMAIlMYpNmTMGo60ziUeUGhmFrRWmWR8UlhQnVD4RKQA5AD0hBCcnHADAO5wlJzsfQA0UJgDA50AehtrmF1QrBzcvFB8ALa2ZHj0EKQUNAwKyqdk55cC3AxEy6tQmz-bXWqLDpdHokKCDehwODsABGIAgA2OkNoCyWK3Wmz+nT2XB4-Hu6A0aO+Pw26nknygAFpqbokNTKZgKQABMb0UjxTzUTx4KCgSBQHSGYxwTS84bdAiETz4J4Qdi8uBQAAG8UofDkSswfOgHLqvPAEBFUBqtiktAQx2hPBkUj6IL6Mgp6N+mCAA"><code><span class="line"></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">type</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> </span><span class="twoslash-highlighted"><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">type</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> Routes</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666"> |</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span></code></span>Routes</span></span></span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#AB5959;--shiki-dark:#CB7676"> typeof</span><span style="color:#B07D48;--shiki-dark:#BD976A"> </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#AB5959;--shiki-dark:#CB7676">readonly</span><span style="color:#999999;--shiki-dark:#666666"> [&#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A">message</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;, &#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: () => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">void</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;]</span></span></code></pre></code></span>routes</span></span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B07D48;--shiki-dark:#BD976A">number</span><span style="color:#999999;--shiki-dark:#666666">][</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">path</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">]</span></span><div class="twoslash-tag-line twoslash-tag-log-line"><span class="twoslash-tag-icon tag-log-icon"><svg viewBox="0 0 32 32"><path fill="currentColor" d="M17 22v-8h-4v2h2v6h-3v2h8v-2zM16 8a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 16 8"></path><path fill="currentColor" d="M26 28H6a2.002 2.002 0 0 1-2-2V6a2.002 2.002 0 0 1 2-2h20a2.002 2.002 0 0 1 2 2v20a2.002 2.002 0 0 1-2 2M6 6v20h20V6Z"></path></svg></span>Routes is a type union of the paths passed to &#96;Router()&#96;</div><span class="line"></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --><!-- HTML_TAG_START --><pre class="code-copy-target hidden">type Route = &#123;
	path: string;
	handler: (...args: any[])=&gt; any
&#125;
function DefineRoutes&lt;const TRoutes extends ReadonlyArray&lt;Route&gt;&gt;(routes: TRoutes)&#123;
	return routes;
&#125;
const routes = DefineRoutes([&#123;
    path: '/hello/world', 
//  ^^^^
    handler: (message: string)=&gt; message.length
//  ^^^^^^^
    &#125;, &#123;
    path: '/goodbye/moon', 
//  ^^^^
    handler: ()=&gt;&#123;&#125;
//  ^^^^^^^
&#125;])
// ---cut---

// @log: Routes is a type union of the paths passed to &#96;Router()&#96;
type Routes = typeof routes[number]['path']
//   ^^^^^^

</pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-g39x6v">If you brave slightly gnarlier TypeScript, you can get some truly incredible results:</p> <!-- HTML_TAG_START --><pre class="shiki shiki-themes vitesse-light vitesse-dark twoslash lsp" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash data-tsplay="https://typescriptlang.org/play/#code/C4TwDgpgBASg9gV2NAvFA3gKAJBgIbAAWAXFAM7ABOAlgHYDmA3DoXrQCYA2ElpAFADoheSvTKk2IANoBdAJQoAfFEmYAvpgBmCWgGNg1OLSgARCJroR4SCGQA8uoxSgAVa8jJQIAD2QdPMBB47EacIACClJR4IHbuEIqKfJSIHqRuqbZyWNiUEMAIlMYpNmTMGo60ziUeUGhmFrRWmWR8UlhQnVD4RKQA5AD0hBCcnHADAO5wlJzsfQA0UJgDA50AehtrmF1QrBzcvFB8ALa2ZHj0EKQUNAwKyqdk55cC3AxEy6tQmz-bXWqLDpdHokKCDehwODsABGIAgA2OkNoCyWK3Wmz+nT2XB4-Hu6A0aO+Pw26nknygAAExvRSPFPNRPHgoKBIFAdIZjHBNCzht0CIRPPgnhB2Cy4FAAAbxSh8OSSzCYVnQel1FngCDcqA1WxSWgIY7QngyKR9EF9GQU9G-NEAWntuiQ9ttFOpcFpUAAwnkCNBmTrKFAtegQaRsQc1PzqJQyIrtHoDEYoABZPAAa2aNkodgypS8vgg-lgQRCtDCkWisXiiT4fx14lzHm2cgwdfyhWKLQExzwYGSmSUfHQUh1AhBMlIo-DPDUchbeE8f2HLigdFc9L1BqNlBkKk8LlN5pkE9cpunlAtanKmEq1UygbQqYzMv7pTkzFdNIkHC8C+oYVXWgADc4AzXkIGOKAJmoIhuhSSBA2Vcg8E0fIQEVANTSGEYxkmaZZgtPg+gAcTyfI6DEABCPo5CtHZvgAH0VTAgA"><code><span class="line"></span><div class="twoslash-tag-line twoslash-tag-log-line"><span class="twoslash-tag-icon tag-log-icon"><svg viewBox="0 0 32 32"><path fill="currentColor" d="M17 22v-8h-4v2h2v6h-3v2h8v-2zM16 8a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 16 8"></path><path fill="currentColor" d="M26 28H6a2.002 2.002 0 0 1-2-2V6a2.002 2.002 0 0 1 2-2h20a2.002 2.002 0 0 1 2 2v20a2.002 2.002 0 0 1-2 2M6 6v20h20V6Z"></path></svg></span>Create a router of &#123;path: handler&#125; pairs</div><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#59873A;--shiki-dark:#80A665"> </span><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#59873A;--shiki-dark:#80A665"> MakeRouter</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">>>(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#999999;--shiki-dark:#666666">):</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#2E8F82;--shiki-dark:#5DA994">T</span><span style="color:#AB5959;--shiki-dark:#CB7676"> in</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> TRoutes</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">]</span><span style="color:#1E754F;--shiki-dark:#4D9375"> as</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> T</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">path</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">]]: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">T</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">handler</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">];</span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span></code></span>MakeRouter</span></span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">type</span><span style="color:#B07D48;--shiki-dark:#BD976A"> parameter</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#59873A;--shiki-dark:#80A665"> TRoutes</span><span style="color:#59873A;--shiki-dark:#80A665"> in</span><span style="color:#59873A;--shiki-dark:#80A665"> MakeRouter</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">>>(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#999999;--shiki-dark:#666666">):</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#2E8F82;--shiki-dark:#5DA994">T</span><span style="color:#AB5959;--shiki-dark:#CB7676"> in</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> TRoutes</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">]</span><span style="color:#1E754F;--shiki-dark:#4D9375"> as</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> T</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">path</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">]]: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">T</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">handler</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">];</span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span></code></span>TRoutes</span></span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> </span><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">interface</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">T</span><span style="color:#999999;--shiki-dark:#666666">></span></code></span>ReadonlyArray</span></span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">type</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> Route</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">    path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">    handler</span><span style="color:#999999;--shiki-dark:#666666">: (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[]) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span></code></pre></code></span>Route</span></span><span style="color:#999999;--shiki-dark:#666666">>>(</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">  </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">routes</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> TRoutes</span><span style="color:#B07D48;--shiki-dark:#BD976A"> extends</span><span style="color:#B07D48;--shiki-dark:#BD976A"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#B07D48;--shiki-dark:#BD976A">Route</span><span style="color:#999999;--shiki-dark:#666666">></span></code></span>routes</span></span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">type</span><span style="color:#B07D48;--shiki-dark:#BD976A"> parameter</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#59873A;--shiki-dark:#80A665"> TRoutes</span><span style="color:#59873A;--shiki-dark:#80A665"> in</span><span style="color:#59873A;--shiki-dark:#80A665"> MakeRouter</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">>>(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#999999;--shiki-dark:#666666">):</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#2E8F82;--shiki-dark:#5DA994">T</span><span style="color:#AB5959;--shiki-dark:#CB7676"> in</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> TRoutes</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">]</span><span style="color:#1E754F;--shiki-dark:#4D9375"> as</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> T</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">path</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">]]: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">T</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">handler</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">];</span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span></code></span>TRoutes</span></span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666"> )</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">  return</span><span style="color:#B07D48;--shiki-dark:#BD976A"> </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">routes</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> TRoutes</span><span style="color:#B07D48;--shiki-dark:#BD976A"> extends</span><span style="color:#B07D48;--shiki-dark:#BD976A"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#B07D48;--shiki-dark:#BD976A">Route</span><span style="color:#999999;--shiki-dark:#666666">></span></code></span>routes</span></span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#B07D48;--shiki-dark:#BD976A">Route</span><span style="color:#999999;--shiki-dark:#666666">>.</span><span style="color:#59873A;--shiki-dark:#80A665">map</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;&#123;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">    [</span><span style="color:#B07D48;--shiki-dark:#BD976A">x</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">]: (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[]) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;>(</span><span style="color:#59873A;--shiki-dark:#80A665">callbackfn</span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A">value</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">, </span><span style="color:#B07D48;--shiki-dark:#BD976A">index</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">, </span><span style="color:#B07D48;--shiki-dark:#BD976A">array</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#AB5959;--shiki-dark:#CB7676">readonly</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> Route</span><span style="color:#999999;--shiki-dark:#666666">[]) => &#123;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">    [</span><span style="color:#B07D48;--shiki-dark:#BD976A">x</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">]: (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[]) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;,</span><span style="color:#B07D48;--shiki-dark:#BD976A"> thisArg</span><span style="color:#AB5959;--shiki-dark:#CB7676">?</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">):</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">    [</span><span style="color:#B07D48;--shiki-dark:#BD976A">x</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">]: (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[]) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;[]</span></span></code></pre></code><div class="twoslash-popup-docs">Calls a defined callback function on each element of an array, and returns an array that contains the results.</div><div class="twoslash-popup-docs twoslash-popup-docs-tags"><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.</span></span><span class="twoslash-popup-docs-tag"><span class="twoslash-popup-docs-tag-name">@param</span><span class="twoslash-popup-docs-tag-value">thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.</span></span></div></span>map</span></span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">route</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> Route</span></code></span>route</span></span><span style="color:#999999;--shiki-dark:#666666">=>(&#123;[</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">route</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> Route</span></code></span>route</span></span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">path</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> string</span></code></span>path</span></span><span style="color:#999999;--shiki-dark:#666666">]: </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">route</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> Route</span></code></span>route</span></span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#59873A;--shiki-dark:#80A665">handler</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> (...</span><span style="color:#B07D48;--shiki-dark:#BD976A">args</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">any</span><span style="color:#999999;--shiki-dark:#666666">[])</span><span style="color:#999999;--shiki-dark:#666666"> =></span><span style="color:#B07D48;--shiki-dark:#BD976A"> any</span></code></span>handler</span></span><span style="color:#999999;--shiki-dark:#666666">&#125;))</span><span style="color:#1E754F;--shiki-dark:#4D9375"> as</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE"> </span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">  &#123;[</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">type</span><span style="color:#B07D48;--shiki-dark:#BD976A"> parameter</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#59873A;--shiki-dark:#80A665"> T</span></code></span>T</span></span><span style="color:#AB5959;--shiki-dark:#CB7676"> in</span><span style="color:#B07D48;--shiki-dark:#BD976A"> </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">type</span><span style="color:#B07D48;--shiki-dark:#BD976A"> parameter</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#59873A;--shiki-dark:#80A665"> TRoutes</span><span style="color:#59873A;--shiki-dark:#80A665"> in</span><span style="color:#59873A;--shiki-dark:#80A665"> MakeRouter</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#AB5959;--shiki-dark:#CB7676"> extends</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> ReadonlyArray</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">Route</span><span style="color:#999999;--shiki-dark:#666666">>>(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">TRoutes</span><span style="color:#999999;--shiki-dark:#666666">):</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#2E8F82;--shiki-dark:#5DA994">T</span><span style="color:#AB5959;--shiki-dark:#CB7676"> in</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> TRoutes</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">]</span><span style="color:#1E754F;--shiki-dark:#4D9375"> as</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> T</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">path</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">]]: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">T</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">handler</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">];</span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span></code></span>TRoutes</span></span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B07D48;--shiki-dark:#BD976A">number</span><span style="color:#999999;--shiki-dark:#666666">]</span><span style="color:#1E754F;--shiki-dark:#4D9375"> as</span><span style="color:#2E8F82;--shiki-dark:#5DA994"> </span><span style="color:#2E8F82;--shiki-dark:#5DA994"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">type</span><span style="color:#B07D48;--shiki-dark:#BD976A"> parameter</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#59873A;--shiki-dark:#80A665"> T</span></code></span>T</span></span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">path</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">]]</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE">: </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#999999;--shiki-dark:#666666"> (</span><span style="color:#B07D48;--shiki-dark:#BD976A">type</span><span style="color:#B07D48;--shiki-dark:#BD976A"> parameter</span><span style="color:#999999;--shiki-dark:#666666">)</span><span style="color:#59873A;--shiki-dark:#80A665"> T</span></code></span>T</span></span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">handler</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">]&#125;;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A">router</span><span style="color:#999999;--shiki-dark:#666666">: &#123;</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">    "</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A">message</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">    "</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">: () => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">void</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span></code></pre></code></span>router</span></span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#59873A;--shiki-dark:#80A665"> </span><span style="color:#59873A;--shiki-dark:#80A665"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">function</span><span style="color:#59873A;--shiki-dark:#80A665"> MakeRouter</span><span style="color:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:#AB5959;--shiki-dark:#CB7676">readonly</span><span style="color:#999999;--shiki-dark:#666666"> [&#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A">message</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;,</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: () => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">void</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;]>(</span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#AB5959;--shiki-dark:#CB7676">readonly</span><span style="color:#999999;--shiki-dark:#666666"> [&#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A">message</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;, &#123;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">    ...;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;]):</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">    ...;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span></code></pre></code></span>MakeRouter</span></span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A">routes</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#AB5959;--shiki-dark:#CB7676">readonly</span><span style="color:#999999;--shiki-dark:#666666"> [&#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A">message</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;, &#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#B07D48;--shiki-dark:#BD976A"> path</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">    readonly</span><span style="color:#59873A;--shiki-dark:#80A665"> handler</span><span style="color:#999999;--shiki-dark:#666666">: () => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">void</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;]</span></span></code></pre></code></span>routes</span></span><span style="color:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"></span>
<span class="line"></span><div class="twoslash-tag-line twoslash-tag-log-line"><span class="twoslash-tag-icon tag-log-icon"><svg viewBox="0 0 32 32"><path fill="currentColor" d="M17 22v-8h-4v2h2v6h-3v2h8v-2zM16 8a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 16 8"></path><path fill="currentColor" d="M26 28H6a2.002 2.002 0 0 1-2-2V6a2.002 2.002 0 0 1 2-2h20a2.002 2.002 0 0 1 2 2v20a2.002 2.002 0 0 1-2 2M6 6v20h20V6Z"></path></svg></span>and easily invoke them with proper type safety</div><span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A"><span class="twoslash-hover"><span class="twoslash-popup-container"><code class="twoslash-popup-code"><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts twoslash><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A">router</span><span style="color:#999999;--shiki-dark:#666666">: &#123;</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">    "</span><span style="color:#B56959;--shiki-dark:#C98A7D">/hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">: (</span><span style="color:#B07D48;--shiki-dark:#BD976A">message</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#2E8F82;--shiki-dark:#5DA994">string</span><span style="color:#999999;--shiki-dark:#666666">) => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">number</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">    "</span><span style="color:#B56959;--shiki-dark:#C98A7D">/goodbye/moon</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">: () => </span><span style="color:#2E8F82;--shiki-dark:#5DA994">void</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span></code></pre></code></span>router</span></span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D"><span>/<span class="twoslash-completion-cursor"><ul class="twoslash-completion-list"><li><span class="twoslash-completions-icon completions-property"><svg viewBox="0 0 32 32"><path fill="currentColor" d="M12.1 2a9.8 9.8 0 0 0-5.4 1.6l6.4 6.4a2.1 2.1 0 0 1 .2 3a2.1 2.1 0 0 1-3-.2L3.7 6.4A9.84 9.84 0 0 0 2 12.1a10.14 10.14 0 0 0 10.1 10.1a10.9 10.9 0 0 0 2.6-.3l6.7 6.7a5 5 0 0 0 7.1-7.1l-6.7-6.7a10.9 10.9 0 0 0 .3-2.6A10 10 0 0 0 12.1 2m8 10.1a7.61 7.61 0 0 1-.3 2.1l-.3 1.1l.8.8l6.7 6.7a2.88 2.88 0 0 1 .9 2.1A2.72 2.72 0 0 1 27 27a2.9 2.9 0 0 1-4.2 0l-6.7-6.7l-.8-.8l-1.1.3a7.61 7.61 0 0 1-2.1.3a8.27 8.27 0 0 1-5.7-2.3A7.63 7.63 0 0 1 4 12.1a8.33 8.33 0 0 1 .3-2.2l4.4 4.4a4.14 4.14 0 0 0 5.9.2a4.14 4.14 0 0 0-.2-5.9L10 4.2a6.45 6.45 0 0 1 2-.3a8.27 8.27 0 0 1 5.7 2.3a8.49 8.49 0 0 1 2.4 5.9"></path></svg></span><span><span class="twoslash-completions-matched">/</span><span class="twoslash-completions-unmatched">goodbye/moon</span></span></li><li><span class="twoslash-completions-icon completions-property"><svg viewBox="0 0 32 32"><path fill="currentColor" d="M12.1 2a9.8 9.8 0 0 0-5.4 1.6l6.4 6.4a2.1 2.1 0 0 1 .2 3a2.1 2.1 0 0 1-3-.2L3.7 6.4A9.84 9.84 0 0 0 2 12.1a10.14 10.14 0 0 0 10.1 10.1a10.9 10.9 0 0 0 2.6-.3l6.7 6.7a5 5 0 0 0 7.1-7.1l-6.7-6.7a10.9 10.9 0 0 0 .3-2.6A10 10 0 0 0 12.1 2m8 10.1a7.61 7.61 0 0 1-.3 2.1l-.3 1.1l.8.8l6.7 6.7a2.88 2.88 0 0 1 .9 2.1A2.72 2.72 0 0 1 27 27a2.9 2.9 0 0 1-4.2 0l-6.7-6.7l-.8-.8l-1.1.3a7.61 7.61 0 0 1-2.1.3a8.27 8.27 0 0 1-5.7-2.3A7.63 7.63 0 0 1 4 12.1a8.33 8.33 0 0 1 .3-2.2l4.4 4.4a4.14 4.14 0 0 0 5.9.2a4.14 4.14 0 0 0-.2-5.9L10 4.2a6.45 6.45 0 0 1 2-.3a8.27 8.27 0 0 1 5.7 2.3a8.49 8.49 0 0 1 2.4 5.9"></path></svg></span><span><span class="twoslash-completions-matched">/</span><span class="twoslash-completions-unmatched">hello/world</span></span></li></ul></span></span></span><span style="color:#B56959;--shiki-dark:#C98A7D">hello/world</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">](</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">Greetings!</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --><!-- HTML_TAG_START --><pre class="code-copy-target hidden">type Route = &#123;
	path: string;
	handler: (...args: any[])=&gt; any
&#125;
function DefineRoutes&lt;const TRoutes extends ReadonlyArray&lt;Route&gt;&gt;(routes: TRoutes)&#123;
	return routes;
&#125;
const routes = DefineRoutes([&#123;
    path: '/hello/world', 
//  ^^^^
    handler: (message: string)=&gt; message.length
//  ^^^^^^^
    &#125;, &#123;
    path: '/goodbye/moon', 
//  ^^^^
    handler: ()=&gt;&#123;&#125;
//  ^^^^^^^
&#125;])
// @log: Routes is a type union of the paths passed to &#96;Router()&#96;

type Routes = typeof routes[number]['path']
//   ^^^^^^
// ---cut---
// @log: Create a router of &#123;path: handler&#125; pairs

function MakeRouter&lt;TRoutes extends ReadonlyArray&lt;Route&gt;&gt;(
  routes:TRoutes
 ) &#123;
  return routes.map(route=&gt;(&#123;[route.path]: route.handler&#125;)) as 
  &#123;[T in TRoutes[number] as T['path']]: T['handler']&#125;;
&#125;
const router = MakeRouter(routes);

// @log: and easily invoke them with proper type safety

router['/hello/world']('Greetings!')
//       ^|


</pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-1xt4njg">Pretty nifty, eh? It could be fun to build a router API that provides a nice client object and outputs bindings for popular backend frameworks like Express, fastify, and hono by doing type transformations on the input routes.</p> <div class="divider"></div> <aside class="prose" data-svelte-h="svelte-1w3uusp"> <p>If you&#39;re feeling extra generous, you can show your support by buying me a
			coffee with the button in the bottom right corner of the page.</p> <div class="divider"></div></aside></article>  <p data-svelte-h="svelte-1bbfa0c">Loading comments...</p>      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous"></div></div>  
			
			<script>
				{
					__sveltekit_1qxbauv = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("../_app/immutable/entry/start.U0nWvP-j.js"),
						import("../_app/immutable/entry/app.BLG_sda7.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>

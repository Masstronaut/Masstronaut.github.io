<!doctype html>
<html lang="en" class="min-h-full">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../_app/immutable/assets/0.DJzTHClV.css" rel="stylesheet">
		<link href="../_app/immutable/assets/NoteGridStatusFilter.XVDl0Kvs.css" rel="stylesheet">
		<link href="../_app/immutable/assets/MDSveXNoteLayout.CyYI4j1f.css" rel="stylesheet">
		<link href="../_app/immutable/assets/3.CL5GBsTu.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.cfK-mOW2.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B1yCi_3F.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/1HLFgmCb.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_9pnLWT9.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/D9oPQppQ.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.CoZ0DpaQ.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C1FmrZbK.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BJAtj1_n.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CHUXHOPN.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/W8aj68s9.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DHsDDbHh.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/QqLkXUPV.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B-eN9XNX.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C6iUor_U.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/AsWAPDv1.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/1IPPVSMY.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.1uf3tTog.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dn6m01Wt.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DZxdjYg5.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CVM844WK.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DNxLwEpJ.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/D9JgqTWT.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/-X8ACxro.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Ck6BX3gD.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C932wzq6.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/3.BrPIaywe.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CF83ONSG.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CMsuk5Ob.js"><!--[--><meta name="description" content="Pulling together a bunch of language tools can be a bother, but I find automated formatting &amp; code review tools are worth the hassle." class="svelte-de2ged"> <meta property="og:title" content="Linting and formatting a svelte project" class="svelte-de2ged"> <meta property="og:type" content="article" class="svelte-de2ged"> <meta property="og:url" content="https://allandeutsch.com/notes/lint-format-svelte" class="svelte-de2ged"> <meta property="og:description" content="Pulling together a bunch of language tools can be a bother, but I find automated formatting &amp; code review tools are worth the hassle." class="svelte-de2ged"> <meta property="og:locale" content="en_US" class="svelte-de2ged"> <meta property="twitter:card" content="summary" class="svelte-de2ged"> <meta property="twitter:url" content="https://allandeutsch.com" class="svelte-de2ged"> <meta property="twitter:title" content="Linting and formatting a svelte project" class="svelte-de2ged"> <meta property="twitter:description" content="Pulling together a bunch of language tools can be a bother, but I find automated formatting &amp; code review tools are worth the hassle." class="svelte-de2ged"> <meta property="twitter:site" content="@AllanDeutsch" class="svelte-de2ged"> <meta property="twitter:creator" content="@AllanDeutsch" class="svelte-de2ged"> <link rel="canonical" href="https://allandeutsch.com/notes/lint-format-svelte" class="svelte-de2ged"> <script type="module" src="https://docduck.dev/selection.js" class="svelte-de2ged"></script> <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="AllanDeutsch" data-description="Support me on Buy me a coffee!" data-message="" data-color="#5F7FFF" data-position="Right" data-x_margin="18" data-y_margin="18" class="svelte-de2ged"></script><!--]--><!--[--><!--[--><meta name="theme-color" content="dark"><!--]--> <!----><script>(function setInitialMode({ defaultMode = "system", themeColors: themeColors2, darkClassNames: darkClassNames2 = ["dark"], lightClassNames: lightClassNames2 = [], defaultTheme = "", modeStorageKey: modeStorageKey2 = "mode-watcher-mode", themeStorageKey: themeStorageKey2 = "mode-watcher-theme" }) {
  const rootEl = document.documentElement;
  const mode = localStorage.getItem(modeStorageKey2) || defaultMode;
  const theme2 = localStorage.getItem(themeStorageKey2) || defaultTheme;
  const light = mode === "light" || mode === "system" && window.matchMedia("(prefers-color-scheme: light)").matches;
  if (light) {
    if (darkClassNames2.length)
      rootEl.classList.remove(...darkClassNames2);
    if (lightClassNames2.length)
      rootEl.classList.add(...lightClassNames2);
  } else {
    if (lightClassNames2.length)
      rootEl.classList.remove(...lightClassNames2);
    if (darkClassNames2.length)
      rootEl.classList.add(...darkClassNames2);
  }
  rootEl.style.colorScheme = light ? "light" : "dark";
  if (themeColors2) {
    const themeMetaEl = document.querySelector('meta[name="theme-color"]');
    if (themeMetaEl) {
      themeMetaEl.setAttribute("content", mode === "light" ? themeColors2.light : themeColors2.dark);
    }
  }
  if (theme2) {
    rootEl.setAttribute("data-theme", theme2);
    localStorage.setItem(themeStorageKey2, theme2);
  }
  localStorage.setItem(modeStorageKey2, mode);
})({"defaultMode":"system","themeColors":{"dark":"dark","light":"light"},"darkClassNames":["dark"],"lightClassNames":[],"defaultTheme":"","modeStorageKey":"mode-watcher-mode","themeStorageKey":"mode-watcher-theme"});</script><!----><!--]--><title>Linting and formatting a svelte project - Allan Deutsch</title>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=UA-86124920-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());

			gtag('config', 'UA-86124920-1');
		</script>
	</head>
	<body
		data-sveltekit-preload-data="hover"
		data-sveltekit-preload-data="viewport"
		class="h-full min-h-[100vh] bg-base-100">
		<div style="display: contents"><!--[--><!--[--><!----><div class="h-full min-h-[100dvh]"><!--[!--><!--]--><!----> <div class="flex w-full items-center bg-base-100 p-2 print:hidden"><!----><!----><!--[!--><button class="px-4 sm:hidden" id="bits-30" aria-haspopup="menu" aria-expanded="false" data-state="closed" data-dropdown-menu-trigger="" type="button"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg> <span class="sr-only">Open navigation menu</span><!----></button><!--]--><!----><!----> <!----><!----><!--[!--><!--]--><!----><!----><!----><!----><!----><!----> <div class="w-1/2 px-4 text-xl font-semibold"><a href="/">Allan Deutsch</a></div> <div class="hidden shrink-0 sm:flex"><ul class="menu menu-horizontal px-1 text-base"><!--[--><!--[!--><li><a href="/">Home</a></li><!--]--><!--[!--><li><a href="/notes">Notes</a></li><!--]--><!--[!--><li><a href="/devlog">Devlog</a></li><!--]--><!--]--></ul></div> <div class="flex w-1/2 justify-end"><!--[!--><div><a href="https://twitter.com/AllanDeutsch" class="group"><span class="sr-only">Follow me on Twitter</span> <svg height="24" width="24" class="mr-1.5 inline fill-base-content transition-colors duration-300 group-hover:fill-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612"><path d="M612 116.258a250.714 250.714 0 01-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 01-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg></a> <a href="https://github.com/masstronaut" class="group"><span class="sr-only">Follow me on GitHub</span> <svg height="24" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="mr-1.5 inline fill-base-content transition-colors duration-300 group-hover:fill-primary"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></div><!--]--></div></div><!----> <div class="h-full p-1 sm:p-4"><!----><docduck-feedback team="TKxfdiO22xOXIrW0c0Pfi" class="svelte-de2ged"></docduck-feedback> <div class="grid w-full grid-cols-[1fr_min(65ch,100%)_1fr] svelte-de2ged"><h1 class="col-start-2 col-end-3 text-left text-4xl font-bold svelte-de2ged" style="view-transition-name: title">Linting and formatting a svelte project</h1></div> <article class="note-container prose mb-8 max-w-full px-2 svelte-de2ged" style="view-transition-name: article;"><header class="w-full max-w-3xl self-center svelte-de2ged"><div class="text-md border-t-neutral/20 text-base-content mt-4 mb-12 flex justify-between border-t pt-1 svelte-de2ged"><div class="svelte-de2ged"><span class="pr-2 svelte-de2ged">🌱</span><span class="hidden sm:inline svelte-de2ged">Planted</span>April 13, 2024. <!--[--><br class="svelte-de2ged">Last tended April 24, 2024.<!--]--></div> <div class="flex flex-col items-end svelte-de2ged"><div class="note__status budding svelte-de2ged">budding 🌿</div> <!--[--><div class="svelte-de2ged">15 minutes read ⏱</div><!--]--></div></div></header> <!----><p>Lately I’ve been working on <a href="https://penguinsight.com" rel="nofollow">Penguinsight</a>. It’s a tool that helps teams building products for developers get precise &amp; actionable feedback on their docs from the people who have to use them. I’ve been building Penguinsight solo, and it’s freeing to build everything myself and understand how it all works. I get a huge boost in <em>personal</em> productivity, but it’s not without downsides.</p> <p>Often the downsides of working solo aren’t a big issue for me. I understand <em>the importance of craftsmanship</em> in software development, and usually write great code. On rare occasion, I am even struck with divine inspiration; my body becomes a mere vessel used by the incomprehensible powers of the universe to transcribe code until 3 in the morning. There is no greater sensation; it is a <a href="https://en.wikipedia.org/wiki/Peak_experience" rel="nofollow">peak experience</a>.</p> <p>After waking up exhausted for the third time last week only to discover some asshole merged poorly formatted code with bugs into staging at 3am, it was time to act… I got up and walked to a coffee shop. With blood flowing and bean juice in hand, I was resolved to reign in that maniac by any means necessary. Tests weren’t cutting it, so it was time to introduce some static analysis tools: a <a href="https://prettier.io" rel="nofollow">formatter</a> and <a href="https://eslint.org/" rel="nofollow">linter</a>.</p> <p>This ended up being a bigger project than I expected for a few reasons:</p> <ul><li>I needed to integrate <code>prettier-plugin-svelte</code> since started using <a href="https://zed.dev" rel="nofollow">zed</a> and no longer gett it via VS Code plugin</li> <li>ESLint upgraded to a new <a href="https://eslint.org/docs/latest/extend/plugin-migration-flat-config" rel="nofollow">flat config</a> format which I needed to learn</li> <li><a href="https://github.com/typescript-eslint/typescript-eslint/issues/8211" rel="nofollow">typescript-eslint doesn’t support the latest eslint 9.0.0 yet</a>, which naturally I discovered after trying to use the eslint 9 😅</li> <li>There is a new <a href="https://sveltejs.github.io/eslint-plugin-svelte/migration/" rel="nofollow">eslint-plugin-svelte</a> which replaced <code>eslint-plugin-svelte3</code></li></ul> <p>Here’s how I got it all up and running!</p> <h2 id="setting-up-prettier"><a aria-hidden="true" tabindex="-1" href="#setting-up-prettier"><span class="icon icon-link"></span></a><a href="#setting-up-prettier" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Setting up prettier</h2> <p>Prettier handles file formatting. I prefer to have things formatted consistently and I don’t want to think about it, so I configure my editor to format files on save. This has the added benefit of also saving my files when I use <code>cmd+s</code> as a “format code” hotkey. Nifty!</p> <h3 id="installing-prettier-packages"><a aria-hidden="true" tabindex="-1" href="#installing-prettier-packages"><span class="icon icon-link"></span></a><a href="#installing-prettier-packages" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Installing prettier packages</h3> <p>From the top, here’s the setup. First, install all the dependencies for formatting (I’ve specified version I know work together). Since these are dev tools, using <code>-D</code> ensures they don’t get bundled into application code.</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> i</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -D</span><span style="color:#B56959;--shiki-dark:#C98A7D"> prettier@3.2.5</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> i</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -D</span><span style="color:#B56959;--shiki-dark:#C98A7D"> prettier-plugin-organize-imports@3.2.4</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> i</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -D</span><span style="color:#B56959;--shiki-dark:#C98A7D"> prettier-plugin-svelte@3.2.2</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> i</span><span style="color:#A65E2B;--shiki-dark:#C99076"> -D</span><span style="color:#B56959;--shiki-dark:#C98A7D"> prettier-plugin-tailwindcss@0.5.13</span></span></code></pre><!----><!----><pre class="code-copy-target hidden">npm i -D prettier@3.2.5
npm i -D prettier-plugin-organize-imports@3.2.4
npm i -D prettier-plugin-svelte@3.2.2
npm i -D prettier-plugin-tailwindcss@0.5.13</pre><!----> <p>I use svelte and tailwind, so their respective plugins are self-explanatory. I like <code>prettier-plugin-organize-imports</code> because most of the time import order is irrelevant, using the plugin to order them minimizes changes for cleaner PR diffs.</p> <h3 id="configuring-prettier"><a aria-hidden="true" tabindex="-1" href="#configuring-prettier"><span class="icon icon-link"></span></a><a href="#configuring-prettier" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Configuring prettier</h3> <p>With the dependencies all installed, it’s time to get prettier setup! There are a few options for the prettier config file, but I prefer <code>prettier.config.js</code> for a couple reasons:</p> <ol><li>I can import JSDoc typings to get intellisense, which helps me fill out my config options</li> <li>It’s more convenient if all the tooling config files are <code>*.config.js</code> for matching patterns</li></ol> <p>Here’s my <code>prettier.config.js</code> file contents:</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" js twoslash filename="prettier.config.js"><code><span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">/** </span><span style="color:#999999;--shiki-dark:#666666">@</span><span style="color:#1E754F;--shiki-dark:#4D9375">type</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#2E8F82;--shiki-dark:#5DA994">import("prettier").Config</span><span style="color:#999999;--shiki-dark:#666666">&#125;</span><span style="color:#A0ADA0;--shiki-dark:#758575DD"> */</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const</span><span style="color:#B07D48;--shiki-dark:#BD976A"> config</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">	useTabs</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#1E754F;--shiki-dark:#4D9375"> true</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">	singleQuote</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#1E754F;--shiki-dark:#4D9375"> true</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">	trailingComma</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">none</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">	bracketSameLine</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#1E754F;--shiki-dark:#4D9375"> true</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">	plugins</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">		'</span><span style="color:#B56959;--shiki-dark:#C98A7D">prettier-plugin-svelte</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">		'</span><span style="color:#B56959;--shiki-dark:#C98A7D">prettier-plugin-tailwindcss</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">		'</span><span style="color:#B56959;--shiki-dark:#C98A7D">prettier-plugin-organize-imports</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	],</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">	// This tells prettier to handle svelte files separately</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">	overrides</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">			files</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">*.svelte</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">			options</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span><span style="color:#998418;--shiki-dark:#B8A965"> parser</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">svelte</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666"> &#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	]</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">export</span><span style="color:#1E754F;--shiki-dark:#4D9375"> default</span><span style="color:#B07D48;--shiki-dark:#BD976A"> config</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"></span></code></pre><!----><!----><pre class="code-copy-target hidden">/** @type &#123;import("prettier").Config&#125; */
const config = &#123;
	useTabs: true,
	singleQuote: true,
	trailingComma: 'none',
	bracketSameLine: true,
	plugins: [
		'prettier-plugin-svelte',
		'prettier-plugin-tailwindcss',
		'prettier-plugin-organize-imports'
	],
	// This tells prettier to handle svelte files separately
	overrides: [
		&#123;
			files: '*.svelte',
			options: &#123; parser: 'svelte' &#125;
		&#125;
	]
&#125;;
export default config;
</pre><!----> <p>My reasoning for these preferences:</p> <ul><li>tabs are less characters than the equivalent spaces, and can be customized to render differently for people who prefer more spaces/indentation</li> <li>Single quotes add less visual noise than double quotes</li> <li>Less trailing commas means less syntax on screen, particularly syntax which does nothing</li> <li>Brackets on the same line means more code on screen and looks cleaner</li></ul> <p>The <code>overrides</code> is necessary for svelte files to be parsed correctly. It overrides the default parser with the <code>svelte</code> parser for files with the <code>.svelte</code> extension.</p> <h3 id="prettier-ignore-file"><a aria-hidden="true" tabindex="-1" href="#prettier-ignore-file"><span class="icon icon-link"></span></a><a href="#prettier-ignore-file" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Prettier ignore file</h3> <p>I have a number of files which I <strong>don’t</strong> want to format. Those are defined in a <code>.prettierignore</code> file. My list denotes files that are generated programmatically or which are not maintained by me, such as the <code>node_modules</code>. Here’s the list:</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" text filename=".prettierignore"><code><span class="line"><span>node_modules/**</span></span>
<span class="line"><span>build/**</span></span>
<span class="line"><span>.svelte-kit/**</span></span>
<span class="line"><span>.env</span></span>
<span class="line"><span>.env.*</span></span>
<span class="line"><span>.vscode/**</span></span>
<span class="line"><span>static/**</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Ignore files for PNPM, NPM and YARN</span></span>
<span class="line"><span>pnpm-lock.yaml</span></span>
<span class="line"><span>package-lock.json</span></span>
<span class="line"><span>yarn.lock</span></span></code></pre><!----><!----><pre class="code-copy-target hidden">node_modules/**
build/**
.svelte-kit/**
.env
.env.*
.vscode/**
static/**

# Ignore files for PNPM, NPM and YARN
pnpm-lock.yaml
package-lock.json
yarn.lock</pre><!----> <h3 id="running-prettier-via-npm-scripts"><a aria-hidden="true" tabindex="-1" href="#running-prettier-via-npm-scripts"><span class="icon icon-link"></span></a><a href="#running-prettier-via-npm-scripts" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Running prettier via npm scripts</h3> <p>At this point, prettier is configured and ready to run. I like to add npm scripts for a couple actions - linting and formatting - for convenience. In <code>package.json</code> add the <code>"lint"</code> and <code>"format"</code> commands:</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" json filename="package.json"><code><span class="line"><span style="color:#999999;--shiki-dark:#666666">&#123;</span></span>
<span class="line"><span style="color:#99841877;--shiki-dark:#B8A96577">	"</span><span style="color:#998418;--shiki-dark:#B8A965">scripts</span><span style="color:#99841877;--shiki-dark:#B8A96577">"</span><span style="color:#999999;--shiki-dark:#666666"> :</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#99841877;--shiki-dark:#B8A96577">		"</span><span style="color:#998418;--shiki-dark:#B8A965">lint</span><span style="color:#99841877;--shiki-dark:#B8A96577">"</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:#B56959;--shiki-dark:#C98A7D">prettier --check '&#123;src,tests&#125;/**/*.&#123;js,ts,svelte&#125;'</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#99841877;--shiki-dark:#B8A96577">		"</span><span style="color:#998418;--shiki-dark:#B8A965">format</span><span style="color:#99841877;--shiki-dark:#B8A96577">"</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:#B56959;--shiki-dark:#C98A7D">prettier --write '&#123;src,tests&#125;/**/*.&#123;js,ts,svelte&#125;'</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span></code></pre><!----><!----><pre class="code-copy-target hidden">&#123;
	"scripts" : &#123;
		"lint": "prettier --check '&#123;src,tests&#125;/**/*.&#123;js,ts,svelte&#125;'",
		"format": "prettier --write '&#123;src,tests&#125;/**/*.&#123;js,ts,svelte&#125;'",
	&#125;
&#125;</pre><!----> <p>I specify the glob patterns in quotes so that the shell doesn’t expand them. This way it’s left to prettier to expand, which will work consistently across OSes and shell environments. The glob will match all files with a <code>js</code>, <code>ts</code>, or <code>svelte</code> extension that are in the <code>src</code> or <code>tests</code> folders. These can be customized per project.</p> <p><code>npm run lint</code> will run prettier to <em>check</em> all the matched files in the project and report if any have incorrect styling. I find this most helpful in CICD workflows where code won’t be changed; I want to fail the build early if it doesn’t match the style convention.</p> <p><code>npm run format</code> uses prettier to <em>format</em> all the project files. This will change them on disk. I use it as a final check after making changes or if my editor isn’t configured to format on edit or save.</p> <p>Speaking of configuring an editor to format on save…</p> <h3 id="configuring-zed-to-format-on-save-using-prettier"><a aria-hidden="true" tabindex="-1" href="#configuring-zed-to-format-on-save-using-prettier"><span class="icon icon-link"></span></a><a href="#configuring-zed-to-format-on-save-using-prettier" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Configuring zed to format on save using prettier</h3> <p>If you install <a href="https://zed.dev/" rel="nofollow">zed</a> now, this will be configured by default. If you have had zed installed since before ~April 2024, you’ll want to make one small change to zed settings.</p> <p>from zed, you can do <code>cmd+shift+p</code> to open the command palette and select <code>zed: open settings</code>, or you can directly open the settings file at <code>~/.config/zed/settings.json</code>:</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" json filename="settings.json"><code><span class="line"><span style="color:#999999;--shiki-dark:#666666">&#123;</span></span>
<span class="line"><span style="color:#99841877;--shiki-dark:#B8A96577">  "</span><span style="color:#998418;--shiki-dark:#B8A965">formatter</span><span style="color:#99841877;--shiki-dark:#B8A96577">"</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:#B56959;--shiki-dark:#C98A7D">auto</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span></code></pre><!----><!----><pre class="code-copy-target hidden">&#123;
  "formatter": "auto",
&#125;</pre><!----> <p>Now <code>"auto"</code> is the default setting in zed, so for new installs this isn’t relevant.</p> <h2 id="static-code-analysis-for-svelte--typescript-using-eslint"><a aria-hidden="true" tabindex="-1" href="#static-code-analysis-for-svelte--typescript-using-eslint"><span class="icon icon-link"></span></a><a href="#static-code-analysis-for-svelte--typescript-using-eslint" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Static code analysis for svelte &amp; typescript using eslint</h2> <p>I absolutely love static code analysis tooling. When I was a C++ developer working in games, I found the <a href="https://pvs-studio.com/en/blog/posts/cpp/0249/" rel="nofollow">PVS Studio blog post about unreal engine</a> impactful, and read many other articles from them. Their blog sold me on the value of static analysis, but I wasn’t the only one! Shortly after the unreal blog post was published, Epic Games hired them for a full audit of Unreal Engine’s source code which at the time had recently released its source code.</p> <p>Now that I do web development, the tech stack and tools are different but my love of static code analysis remains strong as ever. I use typescript over javascript wherever possible, and eslint is the gold standard for static code analysis for both TS and JS.</p> <h3 id="installing-eslint-and-plugins"><a aria-hidden="true" tabindex="-1" href="#installing-eslint-and-plugins"><span class="icon icon-link"></span></a><a href="#installing-eslint-and-plugins" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Installing eslint and plugins</h3> <p>As of this writing (April 2024), the latest version of eslint (9.0.0) isn’t supported by the <code>typescript-eslint</code> plugin, so I use the latest compatible version. As with prettier, the linting tools are only for development so I use <code>--save-dev</code> (or <code>-D</code> for short). Here’s the commands to install eslint and the plugins I use for typescript &amp; svelte projects:</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> i</span><span style="color:#A65E2B;--shiki-dark:#C99076"> --save-dev</span><span style="color:#B56959;--shiki-dark:#C98A7D"> eslint@8.56.0</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> i</span><span style="color:#A65E2B;--shiki-dark:#C99076"> --save-dev</span><span style="color:#B56959;--shiki-dark:#C98A7D"> eslint-config-prettier@8.10.0</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> i</span><span style="color:#A65E2B;--shiki-dark:#C99076"> --save-dev</span><span style="color:#B56959;--shiki-dark:#C98A7D"> eslint-plugin-prettier@5.1.3</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> i</span><span style="color:#A65E2B;--shiki-dark:#C99076"> --save-dev</span><span style="color:#B56959;--shiki-dark:#C98A7D"> eslint-plugin-svelte@2.37.0</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> i</span><span style="color:#A65E2B;--shiki-dark:#C99076"> --save-dev</span><span style="color:#B56959;--shiki-dark:#C98A7D"> typescript-eslint@7.6.0</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">npm</span><span style="color:#B56959;--shiki-dark:#C98A7D"> i</span><span style="color:#A65E2B;--shiki-dark:#C99076"> --save-dev</span><span style="color:#B56959;--shiki-dark:#C98A7D"> globals</span></span></code></pre><!----><!----><pre class="code-copy-target hidden">npm i --save-dev eslint@8.56.0
npm i --save-dev eslint-config-prettier@8.10.0
npm i --save-dev eslint-plugin-prettier@5.1.3
npm i --save-dev eslint-plugin-svelte@2.37.0
npm i --save-dev typescript-eslint@7.6.0
npm i --save-dev globals</pre><!----> <h3 id="configuring-eslint"><a aria-hidden="true" tabindex="-1" href="#configuring-eslint"><span class="icon icon-link"></span></a><a href="#configuring-eslint" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Configuring eslint</h3> <p>Switching to the flat config was a rough adjustment. Some nuances and tricks I found helpful to know about are:</p> <ol><li>The configuration objects cascade, and if multiple config objects match a file the later ones override the early ones</li> <li><code>typescript-eslint</code> exports a <code>config</code> function whose parameters are typed eslint config objects. Super helpful!</li> <li><a href="https://eslint.org/docs/latest/use/configure/configuration-files#globally-ignoring-files-with-ignores" rel="nofollow">Globally ignore files</a> by adding a config object with only the <code>ignores</code> key set. This replaces the <code>.eslintignore</code> file of old.</li> <li><code>globals</code> has the global type definitions for a bunch of environments. This is needed for <a href="https://typescript-eslint.io/getting-started/typed-linting" rel="nofollow">linting with type information</a></li></ol> <p>Here’s how I’ve gotten all the plugins to work together, plus a couple overrides I’m using:</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" js twoslash filename="eslint.config.js"><code><span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#B07D48;--shiki-dark:#BD976A"> js</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">@eslint/js</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#B07D48;--shiki-dark:#BD976A"> eslintConfigPrettier</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">eslint-config-prettier</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#B07D48;--shiki-dark:#BD976A"> eslintPluginSvelte</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">eslint-plugin-svelte</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#B07D48;--shiki-dark:#BD976A"> globals</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">globals</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#B07D48;--shiki-dark:#BD976A"> svelteParser</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">svelte-eslint-parser</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">import</span><span style="color:#B07D48;--shiki-dark:#BD976A"> tsEslint</span><span style="color:#1E754F;--shiki-dark:#4D9375"> from</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">typescript-eslint</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">export</span><span style="color:#1E754F;--shiki-dark:#4D9375"> default</span><span style="color:#B07D48;--shiki-dark:#BD976A"> tsEslint</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#59873A;--shiki-dark:#80A665">config</span><span style="color:#999999;--shiki-dark:#666666">(</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">	js</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">configs</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">recommended</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	...</span><span style="color:#B07D48;--shiki-dark:#BD976A">tsEslint</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">configs</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">recommendedTypeChecked</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#123;</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">		// configure the ts parser for ts files</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		files</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">**/*.ts</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		languageOptions</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">			parser</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> tsEslint</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">parser</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">			parserOptions</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">				project</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#1E754F;--shiki-dark:#4D9375"> true</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">				tsconfigRootDir</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#1E754F;--shiki-dark:#4D9375"> import</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#998418;--shiki-dark:#B8A965">meta</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">dirname</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">			&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		files</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">*.js</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">*.config.ts</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		...</span><span style="color:#B07D48;--shiki-dark:#BD976A">tsEslint</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">configs</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">disableTypeChecked</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	...</span><span style="color:#B07D48;--shiki-dark:#BD976A">eslintPluginSvelte</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">configs</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">flat/recommended</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	...</span><span style="color:#B07D48;--shiki-dark:#BD976A">eslintPluginSvelte</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">configs</span><span style="color:#999999;--shiki-dark:#666666">[</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">flat/prettier</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#123;</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">		// dev tools and server logic run in node environments</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		files</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">**/*.server.ts</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">*.config.ts</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">*.config.js</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		languageOptions</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">			globals</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">				...</span><span style="color:#B07D48;--shiki-dark:#BD976A">globals</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">node</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">			&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		files</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">**/*.svelte</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		languageOptions</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">			// mounted svelte components run in the browser</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">			globals</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">				...</span><span style="color:#B07D48;--shiki-dark:#BD976A">globals</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">browser</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">			&#125;,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">			ecmaVersion</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#2F798A;--shiki-dark:#4C9A91"> 2022</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">			sourceType</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">module</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">			// setup the svelte parser and give it the ts parser config</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">			parser</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> svelteParser</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">			parserOptions</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">				parser</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B07D48;--shiki-dark:#BD976A"> tsEslint</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">parser</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">				// needed so ts parser won't skip svelte files</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">				extraFileExtensions</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">.svelte</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">				// svelte files need both &#96;tsconfig&#96;s</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">				project</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">tsconfig.json</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">.svelte-kit/tsconfig.json</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">				tsconfigRootDir</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#1E754F;--shiki-dark:#4D9375"> import</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#998418;--shiki-dark:#B8A965">meta</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">dirname</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">			&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		&#125;,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		rules</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">			// ignore the $$Props types in shadcn-svelte</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">@typescript-eslint/no-unused-vars</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">				'</span><span style="color:#B56959;--shiki-dark:#C98A7D">error</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">				&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">					varsIgnorePattern</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="color:#B56959;--shiki-dark:#C98A7D">^</span><span style="color:#A65E2B;--shiki-dark:#C99076">\</span><span style="color:#B56959;--shiki-dark:#C98A7D">$</span><span style="color:#A65E2B;--shiki-dark:#C99076">\</span><span style="color:#B56959;--shiki-dark:#C98A7D">$(Props|Events|Slots|Generic)</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">				&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">			]</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		files</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#B56959;--shiki-dark:#C98A7D">tests/**/*.ts</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">],</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		rules</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">no-empty-pattern</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">				'</span><span style="color:#B56959;--shiki-dark:#C98A7D">error</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">				&#123;</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">					// I use &#96;&#123;&#125;&#96; when defining vitest fixtures</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">					allowObjectPatternsAsParameters</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#1E754F;--shiki-dark:#4D9375"> true</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">				&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">			]</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		ignores</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> [</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">.svelte-kit</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">.vercel</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">.github</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">.storybook</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">.vscode</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">build</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">static</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">package</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">coverage</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">			'</span><span style="color:#B56959;--shiki-dark:#C98A7D">node_modules</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">'</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		]</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;,</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">	// this only disables rules; it goes last to win the cascade</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#BD976A">	eslintConfigPrettier</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"></span></code></pre><!----><!----><pre class="code-copy-target hidden">import js from '@eslint/js';
import eslintConfigPrettier from 'eslint-config-prettier';
import eslintPluginSvelte from 'eslint-plugin-svelte';
import globals from 'globals';
import svelteParser from 'svelte-eslint-parser';
import tsEslint from 'typescript-eslint';

export default tsEslint.config(
	js.configs.recommended,
	...tsEslint.configs.recommendedTypeChecked,
	&#123;
		// configure the ts parser for ts files
		files: ['**/*.ts'],
		languageOptions: &#123;
			parser: tsEslint.parser,
			parserOptions: &#123;
				project: true,
				tsconfigRootDir: import.meta.dirname
			&#125;
		&#125;
	&#125;,
	&#123;
		files: ['*.js', '*.config.ts'],
		...tsEslint.configs.disableTypeChecked
	&#125;,
	...eslintPluginSvelte.configs['flat/recommended'],
	...eslintPluginSvelte.configs['flat/prettier'],
	&#123;
		// dev tools and server logic run in node environments
		files: ['**/*.server.ts', '*.config.ts', '*.config.js'],
		languageOptions: &#123;
			globals: &#123;
				...globals.node
			&#125;
		&#125;
	&#125;,
	&#123;
		files: ['**/*.svelte'],
		languageOptions: &#123;
			// mounted svelte components run in the browser
			globals: &#123;
				...globals.browser
			&#125;,
			ecmaVersion: 2022,
			sourceType: 'module',
			// setup the svelte parser and give it the ts parser config
			parser: svelteParser,
			parserOptions: &#123;
				parser: tsEslint.parser,
				// needed so ts parser won't skip svelte files
				extraFileExtensions: ['.svelte'],
				// svelte files need both &#96;tsconfig&#96;s
				project: ['tsconfig.json', '.svelte-kit/tsconfig.json'],
				tsconfigRootDir: import.meta.dirname
			&#125;
		&#125;,
		rules: &#123;
			// ignore the $$Props types in shadcn-svelte
			'@typescript-eslint/no-unused-vars': [
				'error',
				&#123;
					varsIgnorePattern: '^\$\$(Props|Events|Slots|Generic)'
				&#125;
			]
		&#125;
	&#125;,
	&#123;
		files: ['tests/**/*.ts'],
		rules: &#123;
			'no-empty-pattern': [
				'error',
				&#123;
					// I use &#96;&#123;&#125;&#96; when defining vitest fixtures
					allowObjectPatternsAsParameters: true
				&#125;
			]
		&#125;
	&#125;,
	&#123;
		ignores: [
			'.svelte-kit',
			'.vercel',
			'.github',
			'.storybook',
			'.vscode',
			'build',
			'static',
			'package',
			'coverage',
			'node_modules'
		]
	&#125;,
	// this only disables rules; it goes last to win the cascade
	eslintConfigPrettier
);
</pre><!----> <p>It was a bit tedious figuring out which config presets are provided as a single config object (<code>eslintConfigPrettier</code> and <code>js.configs.recommended</code>) and which provided multiple config objects and needed to be spread into the <code>tsEslint.config()</code> call.</p> <p>The <code>'@typescript-eslint/no-unused-vars</code> override for <code>.svelte</code> files is because of a pattern used in <a href="https://www.shadcn-svelte.com/" rel="nofollow">shadcn-svelte</a> to type component props.</p> <p>The config for svelte files is the most tricky one. The parser needs to be set to the svelte parser. The svelte parser needs to be passed <code>parserOptions</code> which include a parser to use for the <code>&lt;script></code> blocks in svelte components. I use typescript in them, so it needs the <code>tsEslint.parser</code>, which in turn needs the <code>tsconfig</code> files and the root directory. I found it was necessary to provide both the root <code>tsconfig.json</code> as well as the one in <code>.svelte-kit/</code>.</p> <p>Most of the config I think is pretty straightforward once you see it, but getting it all working was a tedious exercise. I’d suggest copy + pasting it and modifying to suit your needs.</p> <p>One notable <em>omission</em> from the config is the prettier plugin. I previously used it, but opted to use prettier separately instead. Formatting and linting are separate concepts, and the general consensus among software engineers trends towards handling them separately. This decision results in faster eslint runs because it doesn’t need to parse every file a second time with prettier to check formatting. It also means less dependencies and avoids the need for another integration.</p> <h3 id="adding-a-lint-command-to-packagejson"><a aria-hidden="true" tabindex="-1" href="#adding-a-lint-command-to-packagejson"><span class="icon icon-link"></span></a><a href="#adding-a-lint-command-to-packagejson" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Adding a lint command to <code>package.json</code></h3> <p>With everything configured, the last steps are to add a command to run the linter and fire it up!</p> <p>Crack open the <code>package.json</code> file and add a couple commands to the <code>"scripts"</code> config:</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" json filename="package.json"><code><span class="line"><span style="color:#999999;--shiki-dark:#666666">&#123;</span></span>
<span class="line"><span style="color:#99841877;--shiki-dark:#B8A96577">	"</span><span style="color:#998418;--shiki-dark:#B8A965">scripts</span><span style="color:#99841877;--shiki-dark:#B8A96577">"</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#99841877;--shiki-dark:#B8A96577">		"</span><span style="color:#998418;--shiki-dark:#B8A965">lint</span><span style="color:#99841877;--shiki-dark:#B8A96577">"</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:#B56959;--shiki-dark:#C98A7D">eslint . --report-unused-disable-directives</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#99841877;--shiki-dark:#B8A96577">		"</span><span style="color:#998418;--shiki-dark:#B8A965">lint:fix</span><span style="color:#99841877;--shiki-dark:#B8A96577">"</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:#B56959;--shiki-dark:#C98A7D">eslint . --fix</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">		// Add this one if you want to always run prettier before linting</span></span>
<span class="line"><span style="color:#99841877;--shiki-dark:#B8A96577">		"</span><span style="color:#998418;--shiki-dark:#B8A965">prelint</span><span style="color:#99841877;--shiki-dark:#B8A96577">"</span><span style="color:#999999;--shiki-dark:#666666">:</span><span style="color:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:#B56959;--shiki-dark:#C98A7D">npm run format</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">		// other scripts...</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;</span></span></code></pre><!----><!----><pre class="code-copy-target hidden">&#123;
	"scripts": &#123;
		"lint": "eslint . --report-unused-disable-directives",
		"lint:fix": "eslint . --fix",
		// Add this one if you want to always run prettier before linting
		"prelint": "npm run format",
		// other scripts...
	&#125;
&#125;</pre><!----> <p>The <code>"prelint"</code> script, if specified, will always be run before the <code>"lint"</code> and <code>"lint:fix"</code> commands. It’s a super convenient way to ensure prettier runs before eslint. I also like that It reuses the existing <code>"format"</code> script rather than rewriting it in a second place with something like <code>"prettier --write . &amp;&amp; eslint ."</code>. DRY code and all that.</p> <p>Personally, I don’t use the <code>"prelint"</code> script in my own projects. I often run the formatter once, but I run the linter multiple times as I work through my linter issues and want to recheck the code. The <code>"prelint"</code> script takes a little while to run, and I’d rather not wait for it each time.</p> <h2 id="eslint-in-action"><a aria-hidden="true" tabindex="-1" href="#eslint-in-action"><span class="icon icon-link"></span></a><a href="#eslint-in-action" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>eslint in action</h2> <p>Now that everything is set up, it’s time to crack open the CLI and <code>npm run lint</code> to get a bunch of automated feedback on my code. Here’s an interesting example of a bug the linter helped me catch.</p> <p>I’m building a <a href="https://penguinsight.com/" rel="nofollow">Penguinsight</a> github integration to automatically open issues for new documentation feedback. Github provides a nice way of interacting with their APIs via <code>@octokit/request</code>, <code>@octokit/auth-app</code>, and other libraries. I’ve never used them before, but the documentation seemed pretty straightforward. I have some code that creates an authenticated app client (ie it signs into github as Penguinsight) that can be used to make requests to the github API. I then use the following code to create an issue and return its URL.</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts filename="github.ts" data-tsplay="https://typescriptlang.org/play/#code/MYewdgzgLgBA5gCwEoFMIAdwRTAvDAQwHcCBLWAgVygRTClOAKhQBNUBHStKACgCgAkAAMACgHkAygBUYAegBOKTBDkASAN5LMAOhBEwKBQF91W5SB1gCAWxSnSECNwjCANEI1DB+wwoBcMNqWvkYegoLBgcFWtijhggxQADYogcKaAGYobABGBMAA1tIgAKI2IABWpAIRgtl5BYU6Daz5Rd4AlMYwAKrYCjCt7YVBKMAopABubDDgMFk5bU06rCDAlHb0OujMCMbu3rkgrACegZkgCjbMAGJLIwCSTtwAQienvMNNnULG-J0ANz8fhKKCUBRgGBeQTOYATJyBKAKbjhRzONLQ7wQ5KBRCoDBYFCrZgEHQIKA2ZIAfRxf34xkBQA"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A">ghResponse</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#1E754F;--shiki-dark:#4D9375"> await</span><span style="color:#59873A;--shiki-dark:#80A665"> authenticatedRequest</span><span style="color:#999999;--shiki-dark:#666666">(</span></span>
<span class="line"><span style="color:#B5695977;--shiki-dark:#C98A7D77">	&#96;</span><span style="color:#B56959;--shiki-dark:#C98A7D">POST /repos/</span><span style="color:#1E754F;--shiki-dark:#4D9375">$&#123;</span><span style="color:#B56959;--shiki-dark:#C98A7D">repo</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B56959;--shiki-dark:#C98A7D">owner</span><span style="color:#1E754F;--shiki-dark:#4D9375">&#125;</span><span style="color:#B56959;--shiki-dark:#C98A7D">/</span><span style="color:#1E754F;--shiki-dark:#4D9375">$&#123;</span><span style="color:#B56959;--shiki-dark:#C98A7D">repo</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B56959;--shiki-dark:#C98A7D">name</span><span style="color:#1E754F;--shiki-dark:#4D9375">&#125;</span><span style="color:#B56959;--shiki-dark:#C98A7D">/issues</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">&#96;</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		owner</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B07D48;--shiki-dark:#BD976A">repo</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">owner</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		repo</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B07D48;--shiki-dark:#BD976A">repo</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">name</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		title</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">&#96;</span><span style="color:#1E754F;--shiki-dark:#4D9375">$&#123;</span><span style="color:#59873A;--shiki-dark:#80A665">feedbackToEmoji</span><span style="color:#999999;--shiki-dark:#666666">(</span></span>
<span class="line"><span style="color:#B56959;--shiki-dark:#C98A7D">			feedback</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B56959;--shiki-dark:#C98A7D">feedback</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		)</span><span style="color:#1E754F;--shiki-dark:#4D9375">&#125;</span><span style="color:#B56959;--shiki-dark:#C98A7D"> User feedback received on </span><span style="color:#1E754F;--shiki-dark:#4D9375">$&#123;</span><span style="color:#B56959;--shiki-dark:#C98A7D">feedback</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B56959;--shiki-dark:#C98A7D">document</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B56959;--shiki-dark:#C98A7D">path</span><span style="color:#1E754F;--shiki-dark:#4D9375">&#125;</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">&#96;</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		body</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#59873A;--shiki-dark:#80A665">formatFeedbackIssueBody</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A">feedback</span><span style="color:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#4D9375">return</span><span style="color:#999999;--shiki-dark:#666666"> &#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">	success</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#1E754F;--shiki-dark:#4D9375">true</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">	issue</span><span style="color:#999999;--shiki-dark:#666666">: &#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		url</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B07D48;--shiki-dark:#BD976A">ghResponse</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">data</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">html_url</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">&#125;;</span></span></code></pre><!----><!----><pre class="code-copy-target hidden">const ghResponse = await authenticatedRequest(
	&#96;POST /repos/$&#123;repo.owner&#125;/$&#123;repo.name&#125;/issues&#96;,
	&#123;
		owner: repo.owner,
		repo: repo.name,
		title: &#96;$&#123;feedbackToEmoji(
			feedback.feedback
		)&#125; User feedback received on $&#123;feedback.document.path&#125;&#96;,
		body: formatFeedbackIssueBody(feedback)
	&#125;
);

return &#123;
	success: true,
	issue: &#123;
		url: ghResponse.data.html_url
	&#125;
&#125;;</pre><!----> <p>The <code>ghResponse</code> here is typed as <code>OctokitResponse&lt;any, number></code>, and so accessing the <code>.html_url</code> results in a linting error:</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">~</span><span style="color:#393A34;--shiki-dark:#DBD7CAEE">/Documents/penguinsight/src/lib/server/github.ts</span></span>
<span class="line"><span style="color:#59873A;--shiki-dark:#80A665">104:10</span><span style="color:#B56959;--shiki-dark:#C98A7D">  error</span><span style="color:#B56959;--shiki-dark:#C98A7D">  Unsafe</span><span style="color:#B56959;--shiki-dark:#C98A7D"> assignment</span><span style="color:#B56959;--shiki-dark:#C98A7D"> of</span><span style="color:#B56959;--shiki-dark:#C98A7D"> an</span><span style="color:#999999;--shiki-dark:#666666"> &#96;</span><span style="color:#59873A;--shiki-dark:#80A665">any</span><span style="color:#999999;--shiki-dark:#666666">&#96;</span><span style="color:#59873A;--shiki-dark:#80A665"> value</span><span style="color:#B56959;--shiki-dark:#C98A7D">     @typescript-eslint/no-unsafe-assignment</span></span></code></pre><!----><!----><pre class="code-copy-target hidden">~/Documents/penguinsight/src/lib/server/github.ts
104:10  error  Unsafe assignment of an &#96;any&#96; value     @typescript-eslint/no-unsafe-assignment</pre><!----> <p>I thought it was strange that GitHub would provide an untyped response, and upon further investigation realized I was specifying the endpoint incorrectly. Instead of the template string I was providing with the repo owner and name values, I am supposed to place placeholders. More concretely:</p> <!----><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee" tabindex="0" ts highlight="[object Object]" filename="github.ts" data-tsplay="https://typescriptlang.org/play/#code/MYewdgzgLgBA5gCwEoFMIAdwRTAvDAQwHcCBLWAgVygRTClOAKhQBNUBHStKACgCgAkAHphMUmFAAnKSmBQhomAAMACgHkAygBUYw2ZgjCAJAG8DIAHQgiYFFIC+J8ykyWwBALYonpCBG4IZQAaRTEaP3EIGBocaVl5GBIATxiQGEpsGNoYAEFVAEkhNS1dfVcQI1MbO0dhF0xff0CQoVMhQRr7AC4YC2tbe1DBQQte-o9vYcEGKAAbFF7lMwAzFDYAIwJgAGttEABRTxAAK1IBEcE1ze2dy2vWLd2OgEoHGABVbCkYB6edvpyFCkABubBg4Bgq3Wj1ullYIGAlG89Es6GYCAcrRGGxArGSvRWICknmYADEYf8Cs0UAAhPHJXh-W4vIQOfgvADcQA"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#CB7676">const </span><span style="color:#B07D48;--shiki-dark:#BD976A">ghResponse</span><span style="color:#999999;--shiki-dark:#666666"> =</span><span style="color:#1E754F;--shiki-dark:#4D9375"> await</span><span style="color:#59873A;--shiki-dark:#80A665"> authenticatedRequest</span><span style="color:#999999;--shiki-dark:#666666">(</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">	// incorrect</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">	// &#96;POST /repos/$&#123;repo.owner&#125;/$&#123;repo.name&#125;/issues&#96;,</span></span>
<span class="line"><span style="color:#A0ADA0;--shiki-dark:#758575DD">	// this is the correct way to use the API</span></span>
<span class="line highlighted"><span style="color:#B5695977;--shiki-dark:#C98A7D77">	&#96;</span><span style="color:#B56959;--shiki-dark:#C98A7D">POST /repos/&#123;owner&#125;/&#123;repo&#125;/issues</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">&#96;</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#123;</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		owner</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B07D48;--shiki-dark:#BD976A">repo</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">owner</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		repo</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B07D48;--shiki-dark:#BD976A">repo</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B07D48;--shiki-dark:#BD976A">name</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		title</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#B5695977;--shiki-dark:#C98A7D77">&#96;</span><span style="color:#1E754F;--shiki-dark:#4D9375">$&#123;</span><span style="color:#59873A;--shiki-dark:#80A665">feedbackToEmoji</span><span style="color:#999999;--shiki-dark:#666666">(</span></span>
<span class="line"><span style="color:#B56959;--shiki-dark:#C98A7D">			feedback</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B56959;--shiki-dark:#C98A7D">feedback</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">		)</span><span style="color:#1E754F;--shiki-dark:#4D9375">&#125;</span><span style="color:#B56959;--shiki-dark:#C98A7D"> User feedback received on </span><span style="color:#1E754F;--shiki-dark:#4D9375">$&#123;</span><span style="color:#B56959;--shiki-dark:#C98A7D">feedback</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B56959;--shiki-dark:#C98A7D">document</span><span style="color:#999999;--shiki-dark:#666666">.</span><span style="color:#B56959;--shiki-dark:#C98A7D">path</span><span style="color:#1E754F;--shiki-dark:#4D9375">&#125;</span><span style="color:#B5695977;--shiki-dark:#C98A7D77">&#96;</span><span style="color:#999999;--shiki-dark:#666666">,</span></span>
<span class="line"><span style="color:#998418;--shiki-dark:#B8A965">		body</span><span style="color:#999999;--shiki-dark:#666666">: </span><span style="color:#59873A;--shiki-dark:#80A665">formatFeedbackIssueBody</span><span style="color:#999999;--shiki-dark:#666666">(</span><span style="color:#B07D48;--shiki-dark:#BD976A">feedback</span><span style="color:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">	&#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#666666">);</span></span></code></pre><!----><!----><pre class="code-copy-target hidden">const ghResponse = await authenticatedRequest(
	// incorrect
	// &#96;POST /repos/$&#123;repo.owner&#125;/$&#123;repo.name&#125;/issues&#96;,
	// this is the correct way to use the API
	&#96;POST /repos/&#123;owner&#125;/&#123;repo&#125;/issues&#96;,
	&#123;
		owner: repo.owner,
		repo: repo.name,
		title: &#96;$&#123;feedbackToEmoji(
			feedback.feedback
		)&#125; User feedback received on $&#123;feedback.document.path&#125;&#96;,
		body: formatFeedbackIssueBody(feedback)
	&#125;
);</pre><!----> <p>After making this change, the response is fully typed. Instead of an unsafe any assignment from using the API correctly, I now have a type safe response object and am using the API correctly. This bug had been in the codebase for over a month and I only caught it because I configured the linter to do type checking. Awesome!</p> <p>I’ve found formatting and linting to be especially valuable on solo projects like this blog and <a href="https://penguinsight.com" rel="nofollow">Penguinsight</a>. It’s nice to know that my code is getting reviewed by another set of eyes, even if those eyes belong to a robot in a GitHub Action workflow.</p> <p>Hopefully this helps you get formatting &amp; linting set up on your own projects, whether solo or with a team. Happy hacking!</p><!----><!----> <div class="divider svelte-de2ged"></div> <aside class="prose svelte-de2ged"><p class="svelte-de2ged">If you're feeling extra generous, you can show your support by buying me a
			coffee with the button in the bottom right corner of the page.</p> <div class="divider svelte-de2ged"></div></aside></article> <!----><p class="svelte-de2ged">Loading comments...</p><!---->  <!--[!--><!--]--> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous" class="svelte-de2ged"><!----><!----></div></div> <!--[!--><!--]--><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_1thyyyb = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.cfK-mOW2.js"),
						import("../_app/immutable/entry/app.CoZ0DpaQ.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
